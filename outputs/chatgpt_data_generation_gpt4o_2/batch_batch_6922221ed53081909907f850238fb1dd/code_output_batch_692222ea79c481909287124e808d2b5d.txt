{"id": "batch_req_69222332308c81908b0b373b8fd8fcef", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "9a51397daf326153d1eb9cffb4978a7a", "body": {"id": "resp_0b1b6a5b707179ab0069222329bccc81959a4c4b757ab9803a", "object": "response", "created_at": 1763844905, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0b1b6a5b707179ab006922232a8e9c8195b26f0da2474ec7fa", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Get current averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Use solver-local static for previous decision rate (per instance)\n  static double previous_decision_rate = 0.0;\n  // On first call, initialize previous_decision_rate\n  if (previous_decision_rate == 0.0)\n    previous_decision_rate = decision_rate;\n\n  // Compute glue ratio and decision rate drop\n  const double glue_ratio = slow_glue > 0.0 ? fast_glue / slow_glue : 1.0;\n  const double decision_rate_drop =\n      previous_decision_rate > 0.0\n        ? (previous_decision_rate - decision_rate) / previous_decision_rate\n        : 0.0;\n\n  // Update previous_decision_rate for next time\n  previous_decision_rate = decision_rate;\n\n  // DGAR restart policy\n  if (!solver->stable &&\n      glue_ratio > 1.1 &&\n      decision_rate_drop > 0.15) {\n    kissat_extremely_verbose (solver,\n      \"DGAR restart: glue_ratio %.3f > 1.1 and decision_rate_drop %.2f%% > 15%%\",\n      glue_ratio, 100.0 * decision_rate_drop);\n    return true;\n  }\n\n  // Fallback: conflict limit\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    kissat_extremely_verbose (solver,\n      \"DGAR fallback: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 425, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1827}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331f3a4819083ea2d426972926e", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "df1e718934b5d2f00e9951320f930607", "body": {"id": "resp_0311c221d7ce99d50069222329a9e08197b1c9b7f01047ac72", "object": "response", "created_at": 1763844905, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0311c221d7ce99d50069222329fa5c8197b49e5143d2001775", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Get current statistics\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n\n  // Fast/slow glue averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n\n  // Decision rate moving average\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Maintain previous_decision_rate in the solver struct\n  // Allocate and initialize it if not already done\n  if (!solver->previous_decision_rate_initialized) {\n    solver->previous_decision_rate = decision_rate;\n    solver->previous_decision_rate_initialized = true;\n    // In first invocation, never restart\n    return false;\n  }\n\n  // Compute glue ratio and decision rate drop\n  const double glue_ratio = slow_glue > 0.0 ? fast_glue / slow_glue : 0.0;\n  const double prev_decision_rate = solver->previous_decision_rate;\n  double decision_rate_drop = 0.0;\n  if (prev_decision_rate > 0.0)\n    decision_rate_drop = (prev_decision_rate - decision_rate) / prev_decision_rate;\n\n  // Update previous_decision_rate for next invocation\n  solver->previous_decision_rate = decision_rate;\n\n  // Restart trigger according to DGAR (only in non-stable phase)\n  if (!solver->stable) {\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15) {\n      kissat_extremely_verbose (\n        solver,\n        \"DGAR restart: glue_ratio %.3f > 1.1 and decision_rate_drop %.3f > 0.15\",\n        glue_ratio, decision_rate_drop);\n      return true;\n    }\n  }\n\n  // Tie-breaker: fallback to standard conflict limit\n  if (conflicts >= conflict_limit) {\n    kissat_extremely_verbose (\n      solver,\n      \"DGAR tie-breaker: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      conflicts, conflict_limit);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 504, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1906}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331f84c81908d7e6079aa7b82cb", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "205a0a4ed87e88c14d590c6f4ba19954", "body": {"id": "resp_0210ffe52027e19a0069222329cb148193a68067e5217ec07a", "object": "response", "created_at": 1763844905, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0210ffe52027e19a006922232bbb188193aea6fddbd1d3cad6", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // --- DGAR Algorithm State ---\n  // - fast_glue = fast average of learnt clause glue\n  // - slow_glue = slow average of learnt clause glue\n  // - decision_rate = moving average of decisions per conflict\n  // - previous_decision_rate = persistent across calls\n\n  // Tie-breaker: fallback to standard conflict limit\n  if (CONFLICTS < solver->limits.restart.conflicts)\n    return false;\n\n  // Only consider dynamic glue/decision rate restart if not in stable phase\n  if (!solver->stable)\n  {\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n    const double decision_rate = AVERAGE (decision_rate);\n\n    // persistent storage for previous_decision_rate across calls\n    static double previous_decision_rate = 0.0;\n    static uint64_t previous_conflicts = 0;\n\n    // On first call, initialize previous_decision_rate\n    if (!previous_decision_rate || previous_conflicts != solver->statistics.conflicts - 1)\n    {\n      previous_decision_rate = decision_rate;\n      previous_conflicts = solver->statistics.conflicts;\n      // Do not trigger restart on first call\n      return false;\n    }\n\n    // Compute glue ratio and decision rate drop\n    const double glue_ratio = (slow_glue > 0.0) ? (fast_glue / slow_glue) : 1.0;\n    const double decision_rate_drop =\n      (previous_decision_rate > 0.0) ?\n        ((previous_decision_rate - decision_rate) / previous_decision_rate) :\n        0.0;\n\n    kissat_extremely_verbose (solver,\n      \"DGAR: glue ratio %.3f (fast %.2f / slow %.2f), decision rate drop %.2f%% (prev %.2f, curr %.2f)\",\n      glue_ratio, fast_glue, slow_glue, decision_rate_drop * 100.0, previous_decision_rate, decision_rate);\n\n    // Update previous_decision_rate for next call (only if conflict count increased)\n    if (previous_conflicts != solver->statistics.conflicts)\n    {\n      previous_decision_rate = decision_rate;\n      previous_conflicts = solver->statistics.conflicts;\n    }\n\n    // Restart if glue_ratio > 1.1 and decision_rate_drop > 0.15\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15)\n      return true;\n  }\n  else\n  {\n    // In stable mode, use regular reluctant restart\n    return kissat_reluctant_triggered (&solver->reluctant);\n  }\n\n  // Tie-breaker: force restart if conflict limit reached\n  return true;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 633, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 2035}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_692223321e70819090a3756c5d44964c", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "806874d493662f5402a3d71bc2dfdff7", "body": {"id": "resp_0452dd93cfec7d8200692222ee17d081958616044594558d71", "object": "response", "created_at": 1763844846, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0452dd93cfec7d8200692222ee58388195a1e2b797e221666b", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Algorithm: Dynamic Glue-Rate Adaptive Restart (DGAR)\n  // Only apply in non-stable phase\n  if (!solver->stable) {\n    // Get fast and slow glue averages\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n\n    // Defensive: avoid division by zero\n    if (slow_glue > 0) {\n      const double glue_ratio = fast_glue / slow_glue;\n\n      // Get decision rate moving average\n      const double decision_rate = AVERAGE (decision_rate);\n\n      // Maintain previous_decision_rate in solver->restart_previous_decision_rate\n      double prev_decision_rate = solver->restart_previous_decision_rate;\n\n      // Compute relative drop, guard against zero previous rate\n      double decision_rate_drop = 0.0;\n      if (prev_decision_rate > 0.0) {\n        decision_rate_drop = (prev_decision_rate - decision_rate) / prev_decision_rate;\n      }\n\n      kissat_extremely_verbose (solver,\n        \"DGAR: glue_ratio=%.3f (fast=%.3f / slow=%.3f), decision_rate=%.3f, prev_decision_rate=%.3f, drop=%.3f\",\n        glue_ratio, fast_glue, slow_glue, decision_rate, prev_decision_rate, decision_rate_drop);\n\n      // Update previous_decision_rate for next call\n      solver->restart_previous_decision_rate = decision_rate;\n\n      // DGAR fire: glue_ratio > 1.1 AND decision_rate_drop > 0.15\n      if (glue_ratio > 1.1 && decision_rate_drop > 0.15) {\n        kissat_extremely_verbose (solver, \"DGAR restart: glue quality is degrading and decision rate dropped\");\n        return true;\n      }\n    } else {\n      // Defensive: update previous_decision_rate even if slow_glue==0 (early search)\n      solver->restart_previous_decision_rate = AVERAGE (decision_rate);\n    }\n  }\n\n  // Tie-breaker: fallback to conflict limit\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    kissat_extremely_verbose (solver, \"DGAR tie-breaker: conflict limit reached (%\" PRIu64 \" >= %\" PRIu64 \")\",\n                             CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 567, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1969}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331faf08190b20aa723b27932a7", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "9f7945b4ba5b18e7bca30f6029f74fb5", "body": {"id": "resp_0111a6837c6927f0006922232db48c8190bb48cb652d2c9802", "object": "response", "created_at": 1763844909, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0111a6837c6927f0006922232de834819083f2680e85773300", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Required statistics and averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Static variable to store previous decision rate\n  static double previous_decision_rate = 0.0;\n\n  // Compute glue_ratio and decision_rate_drop (if previous_decision_rate is set)\n  double glue_ratio = 1.0;\n  double decision_rate_drop = 0.0;\n\n  if (slow_glue > 0)\n    glue_ratio = fast_glue / slow_glue;\n\n  if (previous_decision_rate > 0.0)\n    decision_rate_drop =\n      (previous_decision_rate - decision_rate) / previous_decision_rate;\n\n  // Update previous_decision_rate for next invocation\n  previous_decision_rate = decision_rate;\n\n  // DGAR: only in non-stable mode\n  if (!solver->stable) {\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15)\n      return true;\n  }\n\n  // Tie-breaker: standard conflict-based restart\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 319, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1721}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331f8088190a8616ad1daca6620", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "b29e6ac094095319ebca6b68a772dd21", "body": {"id": "resp_0a2c91a2f9688b4600692222ee2ddc8196a370ed57913693e5", "object": "response", "created_at": 1763844846, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0a2c91a2f9688b4600692222ef0eec8196be4763788a7ad4a9", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Only apply DGAR in non-stable phase\n  if (!solver->stable) {\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n    const double glue_ratio = slow_glue > 0 ? fast_glue / slow_glue : 0.0;\n\n    const double decision_rate = AVERAGE (decision_rate);\n\n    // Static variable to remember previous decision rate (per process)\n    static double previous_decision_rate = 0.0;\n    // On very first call, initialize to current value to avoid false trigger\n    if (previous_decision_rate == 0.0)\n      previous_decision_rate = decision_rate;\n\n    double decision_rate_drop = 0.0;\n    if (previous_decision_rate > 0.0)\n      decision_rate_drop = (previous_decision_rate - decision_rate) / previous_decision_rate;\n\n    // Verbose diagnostic output\n    kissat_extremely_verbose (solver,\n      \"DGAR restart: glue_ratio=%g (fast=%g/slow=%g), decision_rate_drop=%g (prev=%g, curr=%g)\",\n      glue_ratio, fast_glue, slow_glue, decision_rate_drop, previous_decision_rate, decision_rate);\n\n    // Update previous_decision_rate for next conflict\n    previous_decision_rate = decision_rate;\n\n    // Main DGAR trigger: glue_ratio > 1.1 and decision_rate_drop > 0.15\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15) {\n      kissat_extremely_verbose (solver, \"DGAR: triggering restart (glue_ratio=%.3f, dr_drop=%.3f)\", glue_ratio, decision_rate_drop);\n      return true;\n    }\n    // Tie-breaker: if conflict limit reached\n    if (CONFLICTS >= solver->limits.restart.conflicts) {\n      kissat_extremely_verbose (solver, \"DGAR: conflict limit tie-breaker triggered (%\" PRIu64 \" >= %\" PRIu64 \")\", CONFLICTS, solver->limits.restart.conflicts);\n      return true;\n    }\n    return false;\n  } else {\n    // Stable phase: use original reluctant restart\n    return kissat_reluctant_triggered (&solver->reluctant);\n  }\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 542, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1944}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6922233202c48190890b4ead6f818abf", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "3fbfaa79157e5d7f06eeb26031df4eaf", "body": {"id": "resp_02c47bad83b6b2920069222329bcac8196b0c61de61dea1379", "object": "response", "created_at": 1763844905, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_02c47bad83b6b2920069222329fbe88196b3917d3a7b36b16b", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Access required signals\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Persistent storage for previous decision rate\n  static double previous_decision_rate = 0.0;\n  static uint64_t previous_conflicts = 0;\n\n  // Only update previous_decision_rate when a new conflict occurs\n  // This avoids multiple updates per call if called repeatedly at same conflict\n  if (solver->statistics.conflicts != previous_conflicts) {\n    previous_conflicts = solver->statistics.conflicts;\n    previous_decision_rate = decision_rate;\n  }\n\n  // Compute glue ratio and decision rate drop\n  double glue_ratio = slow_glue > 0.0 ? fast_glue / slow_glue : 1.0;\n  double decision_rate_drop = 0.0;\n  if (previous_decision_rate > 0.0)\n    decision_rate_drop = (previous_decision_rate - decision_rate) / previous_decision_rate;\n\n  // Main DGAR restart condition: not in stable phase, glue_ratio > 1.1, decision_rate_drop > 0.15\n  if (!solver->stable &&\n      glue_ratio > 1.1 &&\n      decision_rate_drop > 0.15)\n  {\n    kissat_extremely_verbose (solver,\n      \"DGAR restart: glue_ratio=%.3f (>1.1), decision_rate_drop=%.2f (>0.15)\",\n      glue_ratio, decision_rate_drop);\n    return true;\n  }\n\n  // Tie-breaker: if conflict count exceeds the set limit, allow restart\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    kissat_extremely_verbose (solver,\n      \"DGAR fallback restart: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 473, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1875}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6922233201d08190b4d04c8bb3c3553b", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "b3d851d063d164f65cbea6405798991f", "body": {"id": "resp_00163d70a9d8409100692222ee22a88194959ed24cd5e7d612", "object": "response", "created_at": 1763844846, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_00163d70a9d8409100692222ee64208194aa800b744f98c732", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // --- Dynamic Glue-Rate Adaptive Restart (DGAR) ---\n\n  // Only apply DGAR in non-stable phase\n  if (!solver->stable) {\n    // Get averages\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n    const double decision_rate = AVERAGE (decision_rate);\n\n    // Compute glue ratio\n    const double glue_ratio = fast_glue / slow_glue;\n\n    // Get previous decision rate (store in solver struct, initialized on startup)\n    double prev_decision_rate = solver->previous_decision_rate;\n\n    // Compute decision rate drop if prev_decision_rate is positive\n    double decision_rate_drop = 0.0;\n    if (prev_decision_rate > 0.0)\n      decision_rate_drop = (prev_decision_rate - decision_rate) / prev_decision_rate;\n\n    // Extremely verbose output for diagnostics\n    kissat_extremely_verbose (\n      solver,\n      \"DGAR restart: glue_ratio=%.3f (%.2f/%.2f), dec_rate_drop=%.3f (prev=%.2f, now=%.2f), confs=%\" PRIu64 \"/%\" PRIu64,\n      glue_ratio, fast_glue, slow_glue, decision_rate_drop, prev_decision_rate, decision_rate,\n      CONFLICTS, solver->limits.restart.conflicts\n    );\n\n    // Update previous_decision_rate for next call\n    solver->previous_decision_rate = decision_rate;\n\n    // DGAR restart trigger\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15) {\n      kissat_extremely_verbose (\n        solver,\n        \"DGAR restart triggered: glue_ratio=%.3f > 1.1 and dec_rate_drop=%.3f > 0.15\",\n        glue_ratio, decision_rate_drop\n      );\n      return true;\n    }\n  }\n\n  // Tie-breaker: limit of conflicts since last restart (always applies)\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    if (solver->stable)\n      return kissat_reluctant_triggered (&solver->reluctant);\n\n    kissat_extremely_verbose (\n      solver,\n      \"DGAR tie-breaker: conflict limit reached (%\" PRIu64 \" >= %\" PRIu64 \")\",\n      CONFLICTS, solver->limits.restart.conflicts\n    );\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 575, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1977}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331f70881908c51625a50f7bbf9", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "e06c4c259d952f0553546d90b8dcf122", "body": {"id": "resp_0d2fd651089f29a400692222ee088081959327bcf4d58d6fc6", "object": "response", "created_at": 1763844846, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0d2fd651089f29a400692222ee55088195a5f6381d67ddcf37", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Only perform DGAR in non-stable mode\n  if (!solver->stable) {\n    // Retrieve glue averages\n    const double fast_glue = AVERAGE(fast_glue);\n    const double slow_glue = AVERAGE(slow_glue);\n\n    // Avoid division by zero\n    if (slow_glue > 0) {\n      const double glue_ratio = fast_glue / slow_glue;\n\n      // Retrieve current and previous decision rate\n      const double decision_rate = AVERAGE(decision_rate);\n      double previous_decision_rate = solver->previous_decision_rate;\n\n      // If previous_decision_rate is not initialized, set it to current\n      if (previous_decision_rate <= 0.0)\n        previous_decision_rate = decision_rate;\n\n      // Compute the drop in decision rate\n      double decision_rate_drop = 0.0;\n      if (previous_decision_rate > 0.0)\n        decision_rate_drop = (previous_decision_rate - decision_rate) / previous_decision_rate;\n\n      // Store current decision rate for next invocation\n      solver->previous_decision_rate = decision_rate;\n\n      kissat_extremely_verbose(solver,\n        \"DGAR: glue_ratio=%g (fast/slow), decision_rate_drop=%g (prev %g, curr %g)\",\n        glue_ratio, decision_rate_drop, previous_decision_rate, decision_rate);\n\n      // Trigger restart if both criteria are met\n      if (glue_ratio > 1.1 && decision_rate_drop > 0.15)\n        return true;\n    }\n  }\n\n  // Tie-breaker: fallback to conflict-based restart if enabled and limit reached\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 417, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1819}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69222331f9a4819092da9eace0323ff0", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "d993ac840c31e3385df8afe462583b95", "body": {"id": "resp_049c9124a770fe0a00692222ee26ec8193be32de6ce2a91eee", "object": "response", "created_at": 1763844846, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_049c9124a770fe0a00692222ee6e1081939828864290a8c68b", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Only apply dynamic policy in non-stable mode\n  if (!solver->stable) {\n    // Compute glue_ratio and decision_rate_drop\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n    const double glue_ratio = slow_glue > 0.0 ? fast_glue / slow_glue : 0.0;\n\n    const double decision_rate = AVERAGE (decision_rate);\n\n    // Maintain a previous_decision_rate value, initialised at first call\n    static double previous_decision_rate = 0.0;\n    static bool previous_rate_init = false;\n    if (!previous_rate_init) {\n      previous_decision_rate = decision_rate;\n      previous_rate_init = true;\n      // Not enough history for a drop yet\n      return false;\n    }\n\n    double decision_rate_drop = 0.0;\n    if (previous_decision_rate > 0.0)\n      decision_rate_drop = (previous_decision_rate - decision_rate) / previous_decision_rate;\n\n    // Update previous_decision_rate for next call\n    previous_decision_rate = decision_rate;\n\n    kissat_extremely_verbose (solver,\n      \"DGAR: glue_ratio = %g (fast = %g / slow = %g), decision_rate = %g, decision_rate_drop = %g\",\n      glue_ratio, fast_glue, slow_glue, decision_rate, decision_rate_drop);\n\n    if (glue_ratio > 1.1 && decision_rate_drop > 0.15)\n      return true;\n  }\n\n  // Tie-breaker: force restart if conflict limit exceeded\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1402, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 418, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1820}, "user": null, "metadata": {}}}, "error": null}
