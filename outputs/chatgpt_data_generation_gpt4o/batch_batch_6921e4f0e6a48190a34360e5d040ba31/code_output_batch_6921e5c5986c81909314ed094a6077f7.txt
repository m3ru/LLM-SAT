{"id": "batch_req_6921e65b2cdc8190aae30a73242da30c", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "166f2348f5c84b723c98185b96c53090", "body": {"id": "resp_0f2b79c354fbf42b006921e5cc448c8193a0c92d446f269471", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0f2b79c354fbf42b006921e5cc850c8193aa6e198ccd8f167d", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // Enforce minimum interval between restarts (50 conflicts)\n  static uint64_t last_restart_conflicts = 0;\n  const uint64_t conflicts = solver->statistics.conflicts;\n  if (conflicts < solver->limits.restart.conflicts)\n    return false;\n  if (conflicts < last_restart_conflicts + 50)\n    return false;\n\n  // Compute fast and slow glue averages\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  if (slow == 0.0) // Avoid division by zero\n    return false;\n\n  const double ratio = fast / slow;\n\n  // Thresholds\n  double t_low = 0.9;\n  double t_high = 1.2;\n\n  // Make restarts less aggressive in stable mode\n  if (solver->stable)\n  {\n    t_low *= 1.05;\n    t_high *= 1.05;\n  }\n\n  kissat_extremely_verbose (\n    solver,\n    \"AGDR restart: ratio = %g (fast_glue = %g, slow_glue = %g), thresholds [%g,%g], last_restart_conflicts = %\" PRIu64,\n    ratio, fast, slow, t_low, t_high, last_restart_conflicts);\n\n  // Do NOT restart if progress (R < T_low)\n  if (ratio < t_low)\n    return false;\n\n  // Restart if stagnating (R > T_high)\n  if (ratio > t_high)\n  {\n    last_restart_conflicts = conflicts;\n    kissat_extremely_verbose (solver, \"AGDR restart: ratio %g > %g (stagnation detected)\", ratio, t_high);\n    return true;\n  }\n\n  // Tie-breaker: if number of conflicts exceeds limit\n  if (conflicts >= solver->limits.restart.conflicts)\n  {\n    last_restart_conflicts = conflicts;\n    kissat_extremely_verbose (solver, \"AGDR restart: fallback on conflict limit\");\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 480, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1842}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b219881908365647b44e09050", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "20bbfd9e2440175e3c8b5c83fd778825", "body": {"id": "resp_0f76e7b7c9ed31c9006921e61aa60c8196ab5fc4ec5ddcfddb", "object": "response", "created_at": 1763829274, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0f76e7b7c9ed31c9006921e61ade148196a66c05caed3f33cc", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Minimum interval between restarts\n  static const unsigned min_restart_interval = 50;\n  static unsigned last_restart_conflict = 0;\n\n  // Compute thresholds\n  double T_low = 0.9, T_high = 1.2;\n  if (solver->stable) {\n    T_low *= 1.05;\n    T_high *= 1.05;\n  }\n\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Prevent division by zero\n  if (slow <= 0.0)\n    return false;\n\n  const double R = fast / slow;\n\n  // Check time since last restart\n  unsigned conflicts = CONFLICTS;\n  unsigned since_last = conflicts - last_restart_conflict;\n\n  // Option 1: progress, do not restart\n  if (R < T_low)\n    return false;\n\n  // Option 2: stagnation, consider restart\n  if (R > T_high) {\n    if (since_last >= min_restart_interval) {\n      last_restart_conflict = conflicts;\n      kissat_extremely_verbose (solver,\n        \"AGDR restart: R=%.3f > T_high=%.3f (interval=%u) [fast=%.2f, slow=%.2f]\",\n        R, T_high, since_last, fast, slow);\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Option 3: classic restart threshold\n  if (conflicts >= solver->limits.restart.conflicts) {\n    if (since_last >= min_restart_interval) {\n      last_restart_conflict = conflicts;\n      kissat_extremely_verbose (solver,\n        \"AGDR conflict-limit restart at %u conflicts (interval=%u)\",\n        conflicts, since_last);\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 448, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1810}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b28f881908c103ea268ac0e5a", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "47c462d1a8a51ec7c889120fd5dcd34f", "body": {"id": "resp_0cb4db6088969a41006921e623feb48196bc22a61399e6bccb", "object": "response", "created_at": 1763829284, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0cb4db6088969a41006921e62472708196b0468df99b54f7a7", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Adaptive Glue Decay Restart (AGDR) parameters\n  const double base_T_low = 0.9;\n  const double base_T_high = 1.2;\n  const double stable_multiplier = 1.05;\n  double T_low = base_T_low;\n  double T_high = base_T_high;\n  if (solver->stable) {\n    T_low *= stable_multiplier;\n    T_high *= stable_multiplier;\n  }\n\n  // Compute ratio R = fast_glue / slow_glue\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n  double ratio = (slow > 0.0) ? (fast / slow) : 0.0;\n\n  // Maintain a minimum interval of 50 conflicts between restarts\n  static uint64_t last_restart_conflicts = 0;\n  uint64_t current_conflicts = CONFLICTS;\n  uint64_t min_restart_interval = 50;\n  bool interval_ok = (current_conflicts >= last_restart_conflicts + min_restart_interval);\n\n  // Restart logic\n  if (ratio > T_high && interval_ok) {\n    kissat_extremely_verbose (solver,\n      \"AGDR: ratio %g > T_high %g, triggering restart (interval_ok: %d)\",\n      ratio, T_high, interval_ok);\n    last_restart_conflicts = current_conflicts;\n    return true;\n  }\n  if (ratio < T_low) {\n    kissat_extremely_verbose (solver,\n      \"AGDR: ratio %g < T_low %g, making progress, no restart\",\n      ratio, T_low);\n    return false;\n  }\n\n  // If neither, fallback to original conflict limit\n  if (current_conflicts < solver->limits.restart.conflicts)\n    return false;\n\n  // Tie-breaker: if both ratio > T_high and conflict limit exceeded, prefer to restart\n  if (ratio > T_high && interval_ok) {\n    kissat_extremely_verbose (solver,\n      \"AGDR: ratio %g > T_high %g & conflicts %llu >= limit %llu, restart\",\n      ratio, T_high, current_conflicts, solver->limits.restart.conflicts);\n    last_restart_conflicts = current_conflicts;\n    return true;\n  }\n\n  // In stable stage, fallback to reluctant trigger\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 564, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1926}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b1d648190ae5d26587f62804f", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "df47d57d4aeedd1383367e8495531992", "body": {"id": "resp_02a4c81fb4b84ae2006921e62a756481949033b3e0e03d55b0", "object": "response", "created_at": 1763829290, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_02a4c81fb4b84ae2006921e62b8b4c8194a2abc731c0149f57", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Adaptive Glue Decay Restart (AGDR) parameters\n  double T_low = 0.9;\n  double T_high = 1.2;\n  const unsigned MIN_CONFLICTS_BETWEEN_RESTARTS = 50;\n\n  // Less aggressive in stable mode\n  if (solver->stable) {\n    T_low *= 1.05;\n    T_high *= 1.05;\n  }\n\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Protect against division by zero or degenerate slow glue\n  if (slow <= 0.0)\n    return false;\n\n  const double R = fast / slow;\n\n  // Keep track of last restart conflict for minimum interval\n  static uint64_t last_restart_conflict = 0;\n\n  // If we haven't reached the minimum conflict interval, do not restart\n  if (solver->statistics.conflicts < last_restart_conflict + MIN_CONFLICTS_BETWEEN_RESTARTS)\n    goto NO_RESTART;\n\n  // Progress: R < T_low, do NOT restart\n  if (R < T_low)\n    goto NO_RESTART;\n\n  // Stagnation: R > T_high, trigger restart\n  if (R > T_high) {\n    last_restart_conflict = solver->statistics.conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR: triggering restart (R=%.3f > T_high=%.3f, fast=%.3f, slow=%.3f)\",\n      R, T_high, fast, slow);\n    return true;\n  }\n\n  // Classic limit: number of conflicts exceeds restart limit\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    // If both R > T_high and conflicts exceed limit, prefer restart due to R (handled above)\n    last_restart_conflict = solver->statistics.conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR: triggering restart due to conflict limit (conflicts=%\" PRIu64 \" >= limit=%\" PRIu64 \")\",\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\nNO_RESTART:\n  kissat_extremely_verbose (solver,\n    \"AGDR: no restart (R=%.3f [%.3f, %.3f], fast=%.3f, slow=%.3f, conflicts=%\" PRIu64 \")\",\n    R, T_low, T_high, fast, slow, solver->statistics.conflicts);\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 585, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1947}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b26848190aafb3a3a59bec670", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "e426ef1a8c793449bac0018ae415d659", "body": {"id": "resp_0580d462d85b953a006921e5ccce908196ae5617f22df0f1fc", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0580d462d85b953a006921e5cd10088196a2c7910ab05eb8de", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // Enforce minimum interval between restarts (50 conflicts)\n  static uint64_t last_restart_conflict = 0;\n  const uint64_t current_conflicts = solver->statistics.conflicts;\n  const uint64_t min_restart_interval = 50;\n\n  // Use static variable only if in a single-threaded context.\n  // If multi-threaded, move this to solver struct.\n\n  // Gather averages\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Compute ratio R = fast_glue / slow_glue\n  double ratio = 1.0;\n  if (slow > 0.0)\n    ratio = fast / slow;\n\n  // Default thresholds\n  double t_low = 0.9, t_high = 1.2;\n\n  // If stable stage, make restarts less aggressive\n  if (solver->stable) {\n    t_low *= 1.05;\n    t_high *= 1.05;\n  }\n\n  // AGDR logic\n  // Case 1: Making progress, do not restart\n  if (ratio < t_low)\n    return false;\n\n  // Case 2: Stagnating: ratio > t_high \u2192 consider restart\n  if (ratio > t_high) {\n    // Enforce minimum interval\n    if (current_conflicts < last_restart_conflict + min_restart_interval)\n      return false;\n\n    // If both ratio > t_high and conflict limit reached, prefer glue restart\n    if (current_conflicts >= solver->limits.restart.conflicts)\n      kissat_extremely_verbose (solver,\n        \"AGDR restart: glue ratio %.3f > threshold %.3f and conflicts %\"\n        PRIu64 \" >= limit %\" PRIu64,\n        ratio, t_high, current_conflicts, solver->limits.restart.conflicts);\n    else\n      kissat_extremely_verbose (solver,\n        \"AGDR restart: glue ratio %.3f > threshold %.3f (conflicts %\"\n        PRIu64 \" < limit %\" PRIu64 \")\",\n        ratio, t_high, current_conflicts, solver->limits.restart.conflicts);\n\n    last_restart_conflict = current_conflicts;\n    return true;\n  }\n\n  // Classic fallback: if conflict limit reached, allow restart\n  if (current_conflicts >= solver->limits.restart.conflicts) {\n    if (current_conflicts >= last_restart_conflict + min_restart_interval) {\n      kissat_extremely_verbose (solver,\n        \"AGDR fallback restart: conflict limit %\" PRIu64 \" reached at %\" PRIu64,\n        solver->limits.restart.conflicts, current_conflicts);\n      last_restart_conflict = current_conflicts;\n      return true;\n    }\n  }\n\n  // Otherwise, do not restart\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 635, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1997}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b3e3c81908524068bcacbb842", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "67eaac1c77350edb2f987d1238e9a3b4", "body": {"id": "resp_02976d8b9866cc4e006921e635526c8197bae1d4cb474b0705", "object": "response", "created_at": 1763829301, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_02976d8b9866cc4e006921e6358dac8197aa25bc028114880a", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDR: Adaptive Glue Decay Restart\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Avoid division by zero\n  if (slow == 0.0)\n    return false;\n\n  const double ratio = fast / slow;\n\n  // Thresholds\n  double t_low = 0.9, t_high = 1.2;\n  if (solver->stable) {\n    t_low *= 1.05;\n    t_high *= 1.05;\n  }\n\n  // Enforce minimum interval between restarts\n  static uint64_t last_restart_conflicts = 0;\n  const uint64_t min_conflict_interval = 50;\n  const uint64_t conflicts = solver->statistics.conflicts;\n  if (conflicts < solver->limits.restart.conflicts)\n    return false;\n  if (conflicts < last_restart_conflicts + min_conflict_interval)\n    return false;\n\n  // Decide by ratio\n  if (ratio < t_low)\n    return false;\n  if (ratio > t_high) {\n    kissat_extremely_verbose (solver,\n      \"AGDR: ratio %.3f > threshold %.3f (restart triggered, fast_glue %.3f, slow_glue %.3f)\",\n      ratio, t_high, fast, slow);\n    last_restart_conflicts = conflicts;\n    return true;\n  }\n\n  // Default: only restart if conflict limit reached (but not by ratio)\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 367, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1729}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b2a0c81909d12233fb36d31a5", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "4619d76d498bb4daafc5c92b596fb7ba", "body": {"id": "resp_04a089f0769ef617006921e5cc67208193be7a824ee3e4fd48", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_04a089f0769ef617006921e5cca630819399c169f60a4a7908", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Adaptive Glue Decay Restart (AGDR) parameters\n  double T_low = 0.9, T_high = 1.2;\n  const unsigned min_conflicts_between_restarts = 50;\n\n  if (solver->stable) {\n    T_low *= 1.05;\n    T_high *= 1.05;\n  }\n\n  // Get glue averages\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // If slow is zero, never restart (avoid division by zero)\n  if (slow == 0.0)\n    return false;\n\n  const double R = fast / slow;\n\n  // Enforce minimum interval between restarts\n  static uint64_t last_restart_conflict = 0;\n  uint64_t conflicts = CONFLICTS;\n  if (conflicts < last_restart_conflict + min_conflicts_between_restarts)\n    return false;\n\n  // Determine restart trigger\n  bool trigger = false;\n  if (R > T_high) {\n    trigger = true;\n  } else if (R < T_low) {\n    trigger = false;\n  } else {\n    // Between thresholds: only restart if conflict limit reached\n    if (conflicts >= solver->limits.restart.conflicts)\n      trigger = true;\n  }\n\n  if (trigger) {\n    last_restart_conflict = conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR restart: R=%.3f (fast_glue %.2f / slow_glue %.2f), T_low=%.3f, T_high=%.3f, conflicts=%\" PRIu64,\n      R, fast, slow, T_low, T_high, conflicts);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 421, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1783}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b271481908f1e72641a0607eb", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "a0153ff8071986738c95fb18dc36ab3e", "body": {"id": "resp_0c4e719f81c2efc7006921e5cc67c481959b79b514c59bd39f", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0c4e719f81c2efc7006921e5ccc1a08195a2607e3fcdde20ff", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Adaptive Glue Decay Restart (AGDR) parameters\n  const double default_T_low = 0.9, default_T_high = 1.2;\n  double T_low = default_T_low, T_high = default_T_high;\n\n  // In stable stage, thresholds are made less aggressive\n  if (solver->stable) {\n    T_low *= 1.05;\n    T_high *= 1.05;\n  }\n\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Avoid division by zero\n  if (slow <= 0.0)\n    return false;\n\n  const double R = fast / slow;\n  const uint64_t conflicts = CONFLICTS;\n  const uint64_t restart_conflict_limit = solver->limits.restart.conflicts;\n\n  // Static minimum interval between restarts\n  const uint64_t RESTART_MIN_INTERVAL = 50;\n\n  // Store the last restart conflict count in solver->restart.last_conflict\n  // Initialize if unset (0 and no restarts yet)\n  uint64_t *last_conflict_ptr = &solver->restart.last_conflict;\n\n  // Progress: do NOT restart\n  if (R < T_low)\n    return false;\n\n  // Stagnation: consider restart if enough conflicts since last restart\n  if (R > T_high) {\n    if (conflicts >= *last_conflict_ptr + RESTART_MIN_INTERVAL) {\n      kissat_extremely_verbose (solver,\n        \"AGDR: Restart triggered (R = %g > T_high = %g, interval = %llu)\",\n        R, T_high, (unsigned long long)(conflicts - *last_conflict_ptr));\n      *last_conflict_ptr = conflicts;\n      return true;\n    } else {\n      kissat_extremely_verbose (solver,\n        \"AGDR: Not restarting (R > T_high but only %llu conflicts since last restart)\",\n        (unsigned long long)(conflicts - *last_conflict_ptr));\n      return false;\n    }\n  }\n\n  // Classic restart on conflict limit, but only if minimum interval passed\n  if (conflicts >= restart_conflict_limit &&\n      conflicts >= *last_conflict_ptr + RESTART_MIN_INTERVAL) {\n    kissat_extremely_verbose (solver,\n      \"AGDR: Restart triggered (conflict limit %llu reached, interval = %llu)\",\n      (unsigned long long)restart_conflict_limit,\n      (unsigned long long)(conflicts - *last_conflict_ptr));\n    *last_conflict_ptr = conflicts;\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 594, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1956}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b225081909b204c0588f972fe", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "54c937ee1dee01e0c85e24fc13b8bdef", "body": {"id": "resp_082ad0eacc9ef79a006921e5cc6ee881969202aed49a4ba113", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_082ad0eacc9ef79a006921e5ccc1c48196a37f75146553b6d2", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Minimum interval between restarts\n  const unsigned min_conflict_interval = 50;\n\n  // Obtain current conflict count and restart limit\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t restart_limit = solver->limits.restart.conflicts;\n\n  // Use the last restart conflict counter (initialize if needed)\n  if (!solver->last_restart_conflicts)\n    solver->last_restart_conflicts = 0;\n  const uint64_t since_last_restart = conflicts - solver->last_restart_conflicts;\n\n  // Compute glue averages\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n\n  // Compute ratio R = fast / slow\n  const double ratio = (slow > 0.0) ? (fast / slow) : 1.0;\n\n  // Set thresholds (default)\n  double T_low = 0.9;\n  double T_high = 1.2;\n  // If stable, make thresholds less aggressive\n  if (solver->stable) {\n    T_low *= 1.05;\n    T_high *= 1.05;\n  }\n\n  // AGDR verbose reporting\n  kissat_extremely_verbose (\n    solver,\n    \"AGDR: ratio(fast/slow)=%.4f (fast=%.4f/slow=%.4f) T_low=%.3f T_high=%.3f since-last=%\" PRIu64 \" limit=%\" PRIu64,\n    ratio, fast, slow, T_low, T_high, since_last_restart, restart_limit);\n\n  // Progress: do not restart if making progress\n  if (ratio < T_low)\n    return false;\n\n  // Restart: if stagnating (ratio > T_high) and sufficient interval\n  if (ratio > T_high && since_last_restart >= min_conflict_interval) {\n    solver->last_restart_conflicts = conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR: triggering restart (ratio %.4f > T_high %.3f, interval %\" PRIu64 \" \u2265 %u)\",\n      ratio, T_high, since_last_restart, min_conflict_interval);\n    return true;\n  }\n\n  // Additionally, tie-breaker: if both ratio > T_high and conflict limit reached, prefer ratio\n  if (CONFLICTS >= restart_limit && ratio > T_high && since_last_restart >= min_conflict_interval) {\n    solver->last_restart_conflicts = conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR: tie-breaker restart (conflicts %\" PRIu64 \" \u2265 limit %\" PRIu64 \" and ratio %.4f > T_high %.3f)\",\n      conflicts, restart_limit, ratio, T_high);\n    return true;\n  }\n\n  // Fallback: standard restart if conflict limit reached and min interval satisfied\n  if (CONFLICTS >= restart_limit && since_last_restart >= min_conflict_interval) {\n    solver->last_restart_conflicts = conflicts;\n    kissat_extremely_verbose (solver,\n      \"AGDR: fallback restart (conflicts %\" PRIu64 \" \u2265 limit %\" PRIu64 \" and interval %\" PRIu64 \" \u2265 %u)\",\n      conflicts, restart_limit, since_last_restart, min_conflict_interval);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 742, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 2104}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e65b1c0481908dd28a8b83885da6", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "09c3d503e450073279646a622980e193", "body": {"id": "resp_0e2f28f89eebfbe6006921e5cc909081978421127ca0c6eb0a", "object": "response", "created_at": 1763829196, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0e2f28f89eebfbe6006921e5ccd5908197bd2f5a254aa03cb6", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Enforce minimum interval between restarts\n  static uint64_t last_restart_conflicts = 0;\n  const uint64_t now_conflicts = solver->statistics.conflicts;\n  const uint64_t min_conflict_interval = 50;\n  if (now_conflicts < last_restart_conflicts + min_conflict_interval)\n    return false;\n\n  // Compute fast/slow glue ratio\n  const double fast = AVERAGE(fast_glue);\n  const double slow = AVERAGE(slow_glue);\n  if (slow <= 0.0) // avoid division by zero\n    return false;\n  const double ratio = fast / slow;\n\n  // AGDR thresholds\n  double t_low = 0.9, t_high = 1.2;\n  if (solver->stable) {\n    t_low *= 1.05;\n    t_high *= 1.05;\n  }\n\n  // Decision logic\n  if (ratio < t_low)\n    return false;\n  if (ratio > t_high) {\n    last_restart_conflicts = now_conflicts;\n    kissat_extremely_verbose(\n      solver,\n      \"AGDR restart: fast_glue/slow_glue ratio %.3f > %.3f%s after %\" PRIu64 \" conflicts\",\n      ratio, t_high, solver->stable ? \" (stable)\" : \"\", now_conflicts);\n    return true;\n  }\n\n  // Tie-breaker: if ratio > t_high and conflicts exceeds limit, prefer glue ratio condition\n  if ((ratio > t_high) && (now_conflicts >= solver->limits.restart.conflicts)) {\n    last_restart_conflicts = now_conflicts;\n    kissat_extremely_verbose(\n      solver,\n      \"AGDR tie-breaker restart: ratio %.3f > %.3f and conflicts (%\" PRIu64 \") >= limit (%\" PRIu64 \")\",\n      ratio, t_high, now_conflicts, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  // Standard conflict limit if glue ratio does not apply\n  if (now_conflicts < solver->limits.restart.conflicts)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered(&solver->reluctant);\n\n  // Fallback: glue-based margin restart (as in original Kissat)\n  const double margin = (100.0 + GET_OPTION(restartmargin)) / 100.0;\n  const double limit = margin * slow;\n  kissat_extremely_verbose(\n    solver,\n    \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow,\n    (limit > fast    ? '>'\n     : limit == fast ? '='\n                     : '<'),\n    fast);\n  return (limit <= fast);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1362, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 634, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1996}, "user": null, "metadata": {}}}, "error": null}
