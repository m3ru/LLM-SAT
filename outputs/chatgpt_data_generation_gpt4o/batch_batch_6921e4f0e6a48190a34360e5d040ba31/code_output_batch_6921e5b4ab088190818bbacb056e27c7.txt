{"id": "batch_req_6921e6363ab88190993a211d2be7035c", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "270944f52e687f6ab357bc4b992ecbf6", "body": {"id": "resp_0ccce3a1d40119aa006921e5f57b348197aaf4c4c3e0985220", "object": "response", "created_at": 1763829237, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0ccce3a1d40119aa006921e5f5c8488197912a86250b5f315f", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Conflict limit trigger\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    // Tie-break: if glue/decision rate trigger also fires, prefer glue/decision trigger (checked below)\n    // so do not return yet, check glue/decision trigger first\n  }\n\n  // Get EWMAs\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Store initial_decision_rate_ewma in solver\n  // If this is the first call, initialize it\n  if (solver->initial_decision_rate_ewma == 0.0)\n    solver->initial_decision_rate_ewma = decision_rate;\n\n  // Determine glue threshold multiplier based on stable/unstable stage\n  const double glue_threshold = solver->stable ? 1.1 : 1.2;\n  const double rate_threshold = 0.85;\n\n  bool glue_decision_trigger = false;\n  if (fast > glue_threshold * slow && decision_rate < rate_threshold * solver->initial_decision_rate_ewma)\n    glue_decision_trigger = true;\n\n  // Prefer glue/decision trigger over conflict limit trigger\n  if (glue_decision_trigger && solver->level > 0) {\n    kissat_extremely_verbose (solver,\n      \"adaptive glue-rate restart: fast_glue %.2f > %.2f * slow_glue %.2f AND decision_rate %.2f < %.2f * initial_decision_rate %.2f\",\n      fast, glue_threshold, slow, decision_rate, rate_threshold, solver->initial_decision_rate_ewma);\n    // Reset initial_decision_rate_ewma to current value after trigger\n    solver->initial_decision_rate_ewma = decision_rate;\n    return true;\n  }\n\n  // If conflict limit trigger fires and glue/decision trigger does not\n  if (CONFLICTS >= solver->limits.restart.conflicts) {\n    kissat_extremely_verbose (solver,\n      \"adaptive glue-rate restart: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  // No trigger\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 530, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1346}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e63643bc8190aec48b7878bcbf0e", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "207fd195c1e6f42cbd981868f98500ed", "body": {"id": "resp_04373bac15ba98d3006921e5fa4ce88190995e7d4918ac3d4d", "object": "response", "created_at": 1763829242, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_04373bac15ba98d3006921e5fa9d948190a1a2374f93ee4a93", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Gather relevant statistics.\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Use a static variable to store the initial decision rate for each phase.\n  static double initial_decision_rate = 0.0;\n  static uint64_t last_restart_conflicts = 0;\n\n  // If this is the first call in this search, initialize initial_decision_rate.\n  if (initial_decision_rate == 0.0)\n    initial_decision_rate = decision_rate;\n\n  // Compute glue/decision triggers.\n  double glue_threshold = solver->stable ? 1.1 : 1.2;\n  double rate_threshold = 0.85;\n\n  bool glue_trigger =\n    (fast_glue > glue_threshold * slow_glue) &&\n    (decision_rate < rate_threshold * initial_decision_rate);\n\n  // Conflict-based trigger.\n  bool conflict_trigger =\n    (CONFLICTS >= solver->limits.restart.conflicts);\n\n  // Prefer glue/decision trigger if both fire.\n  bool restart = false;\n  if (glue_trigger)\n  {\n    restart = true;\n  }\n  else if (conflict_trigger)\n  {\n    restart = true;\n  }\n\n  // Tie-breaking: only restart if level > 0.\n  if (restart && !solver->level)\n    restart = false;\n\n  // If restart is triggered by glue/decision, reset initial_decision_rate.\n  if (restart && glue_trigger)\n    initial_decision_rate = decision_rate;\n\n  // After restart, update last_restart_conflicts.\n  if (restart)\n    last_restart_conflicts = CONFLICTS;\n\n  // If restart is triggered by stable mode, use reluctant schedule.\n  if (restart && solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  return restart;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 456, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1272}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e63640bc8190ba754bf5fe9494f1", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "dd3f3fc338fe17951caa805facc91ed8", "body": {"id": "resp_04f5b13a9b830a94006921e5fe38d48194b6fbbd370fef9329", "object": "response", "created_at": 1763829246, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_04f5b13a9b830a94006921e5feb10c8194989153ef0b39ed45", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Fetch statistics and limits\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Initial decision rate is stored in solver->initial_decision_rate\n  // If not initialized, set it now\n  if (solver->initial_decision_rate == 0.0)\n    solver->initial_decision_rate = decision_rate;\n\n  // Compute glue and decision rate triggers\n  const double glue_multiplier = solver->stable ? 1.1 : 1.2;\n  const double decision_rate_factor = 0.85;\n  bool glue_trigger = (fast_glue > glue_multiplier * slow_glue);\n  bool decision_rate_trigger = (decision_rate < decision_rate_factor * solver->initial_decision_rate);\n\n  bool glue_and_decision = glue_trigger && decision_rate_trigger;\n  bool conflict_trigger = (conflicts >= conflict_limit);\n\n  // Tie-breaking: prefer glue/decision rate trigger if both fire\n  if (glue_and_decision)\n  {\n    kissat_extremely_verbose (solver,\n      \"adaptive glue-rate hybrid restart: fast_glue %.2f > %.2f * slow_glue %.2f AND decision_rate %.2f < %.2f * initial_decision_rate %.2f (triggered)\",\n      fast_glue, glue_multiplier, slow_glue, decision_rate, decision_rate_factor, solver->initial_decision_rate);\n    solver->initial_decision_rate = decision_rate;\n    return true;\n  }\n\n  if (conflict_trigger)\n  {\n    kissat_extremely_verbose (solver,\n      \"adaptive glue-rate hybrid restart: conflicts %\" PRIu64 \" >= limit %\" PRIu64 \" (triggered)\", conflicts, conflict_limit);\n    return true;\n  }\n\n  // No trigger\n  kissat_extremely_verbose (solver,\n    \"adaptive glue-rate hybrid restart: fast_glue %.2f <= %.2f * slow_glue %.2f OR decision_rate %.2f >= %.2f * initial_decision_rate %.2f (not triggered)\",\n    fast_glue, glue_multiplier, slow_glue, decision_rate, decision_rate_factor, solver->initial_decision_rate);\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 555, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1371}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e63648a481909446bb0f8b47352a", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "c3ce9a525853a38a50d1135bdf1fb86a", "body": {"id": "resp_039a49c55a4bfec4006921e60453188190abec71b408526344", "object": "response", "created_at": 1763829252, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_039a49c55a4bfec4006921e604907c819091de8675ae83f1e9", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Check conflict limit trigger\n  bool conflict_limit_trigger = (CONFLICTS >= solver->limits.restart.conflicts);\n\n  // Fetch glue averages\n  const double fast = AVERAGE(fast_glue);\n  const double slow = AVERAGE(slow_glue);\n\n  // Fetch decision rate EWMA and initial decision rate\n  const double decision_rate = solver->averages[solver->stable].decision_rate.value;\n  double *initial_decision_rate_ptr = &solver->averages[solver->stable].decision_rate.initial_value;\n  const double initial_decision_rate = *initial_decision_rate_ptr;\n\n  // Compute thresholds, adapt glue margin for stable/unstable\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double glue_limit = glue_margin * slow;\n  const double decision_margin = 0.85;\n  const double decision_limit = decision_margin * initial_decision_rate;\n\n  bool glue_trigger = (fast > glue_limit) && (decision_rate < decision_limit);\n\n  // Prefer glue/decision rate trigger if both fire\n  if (glue_trigger) {\n    kissat_extremely_verbose(\n      solver,\n      \"restarting by glue/decision-rate trigger: fast_glue %g > %.2f * slow_glue %g, decision_rate %g < %.2f * initial_decision_rate %g\",\n      fast, glue_margin, slow, decision_rate, decision_margin, initial_decision_rate);\n\n    // Reset initial decision rate after restart\n    *initial_decision_rate_ptr = decision_rate;\n    return true;\n  }\n\n  // If only conflict limit trigger fires\n  if (conflict_limit_trigger) {\n    kissat_extremely_verbose(\n      solver,\n      \"restarting by conflict limit trigger: conflicts %ld >= limit %ld\",\n      (long)CONFLICTS, (long)solver->limits.restart.conflicts);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 457, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1273}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e6363f2c8190b1f059b119fddcce", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "85f07c21aeee0bd4abc660f8259c8ff4", "body": {"id": "resp_091765d65d95b7ce006921e6086a048197a5a818077b40479b", "object": "response", "created_at": 1763829256, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_091765d65d95b7ce006921e608ccc88197a814021ca41fbb39", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Gather relevant statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n  double *initial_decision_rate_ptr = &solver->initial_decision_rate_ewma;\n\n  // On first call, initialize initial_decision_rate_ewma if not set\n  if (*initial_decision_rate_ptr <= 0)\n    *initial_decision_rate_ptr = decision_rate;\n  const double initial_decision_rate = *initial_decision_rate_ptr;\n\n  // Compute margins\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double decision_margin = 0.85;\n\n  // Glue and decision rate based trigger\n  bool glue_decision_trigger =\n    (fast_glue > glue_margin * slow_glue) &&\n    (decision_rate < decision_margin * initial_decision_rate);\n\n  // Conflict based trigger\n  bool conflict_trigger = CONFLICTS >= solver->limits.restart.conflicts;\n\n  // Tie-breaking and trigger selection\n  if (glue_decision_trigger) {\n    // Highest priority: glue/decision rate trigger\n    kissat_extremely_verbose (\n      solver,\n      \"adaptive glue-rate hybrid restart: fast_glue=%.2f slow_glue=%.2f (margin=%.2f) decision_rate=%.2f initial_decision_rate=%.2f (margin=%.2f)\",\n      fast_glue, slow_glue, glue_margin, decision_rate, initial_decision_rate, decision_margin);\n    // Reset initial_decision_rate_ewma to current after glue/decision restart\n    *initial_decision_rate_ptr = decision_rate;\n    return true;\n  }\n\n  if (conflict_trigger) {\n    kissat_extremely_verbose (\n      solver,\n      \"conflict limit restart: conflicts=%\" PRIu64 \" limit=%\" PRIu64,\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  // Stable mode: fallback to reluctant trigger if nothing else triggers\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 522, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1338}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e6363fb88190b3401d4cbdf0188a", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "e2edaa4f6a3a9c30132d19bfb4b05d22", "body": {"id": "resp_0e160319c085040e006921e60c8b408193a5957a611afb2f8b", "object": "response", "created_at": 1763829260, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0e160319c085040e006921e60cd7248193a13998e49e2c09fe", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Get required statistics and averages\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Initial decision rate: keep in solver->initial_decision_rate_ewma\n  // If not set, initialize to current decision rate\n  if (solver->initial_decision_rate_ewma == 0.0)\n    solver->initial_decision_rate_ewma = decision_rate;\n\n  double glue_factor = solver->stable ? 1.1 : 1.2;\n  double rate_factor = 0.85;\n\n  bool glue_rate_trigger = \n    (fast_glue > glue_factor * slow_glue) &&\n    (decision_rate < rate_factor * solver->initial_decision_rate_ewma);\n\n  bool conflict_limit_trigger = (conflicts >= conflict_limit);\n\n  // Tie-breaking: prefer glue/rate trigger if both fire\n  if (glue_rate_trigger) {\n    // Reset the initial decision rate EWMA to current value after restart\n    solver->initial_decision_rate_ewma = decision_rate;\n    kissat_extremely_verbose (\n      solver,\n      \"adaptive glue-rate restart: fast_glue %.2f > %.2f*slow_glue %.2f AND decision_rate %.2f < %.2f*initial_decision_rate %.2f\",\n      fast_glue, glue_factor, slow_glue, decision_rate, rate_factor, solver->initial_decision_rate_ewma);\n    return true;\n  }\n\n  if (conflict_limit_trigger) {\n    kissat_extremely_verbose (\n      solver,\n      \"conflict limit restart: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      conflicts, conflict_limit);\n    return true;\n  }\n\n  return false;\n}\n</code>\n"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 467, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1283}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e63641008190aa6ea0d3d27d9a0b", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "8ad5f666a23f4a3ec94fe01103a29371", "body": {"id": "resp_0bcef14acf699e9b006921e631a0548193b810fdef46255f1d", "object": "response", "created_at": 1763829297, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0bcef14acf699e9b006921e631f3ac81939d1580cc665f86a8", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Current statistics\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n\n  // Glue averages\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n\n  // Decision rate average\n  const double decision_rate = AVERAGE(decision_rate);\n\n  // Initial decision rate value (persisted in solver)\n  double *initial_decision_rate_ptr = &solver->initial_decision_rate_ewma;\n  if (!*initial_decision_rate_ptr)\n    *initial_decision_rate_ptr = decision_rate;\n  const double initial_decision_rate = *initial_decision_rate_ptr;\n\n  // Thresholds\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double decision_rate_margin = 0.85;\n\n  bool glue_decision_trigger = false;\n  if (fast_glue > glue_margin * slow_glue &&\n      decision_rate < decision_rate_margin * initial_decision_rate) {\n    glue_decision_trigger = true;\n  }\n\n  // Prefer glue/decision trigger over conflict trigger\n  if (glue_decision_trigger) {\n    kissat_extremely_verbose(\n      solver,\n      \"adaptive hybrid restart: fast_glue %.2f > %.2f * slow_glue %.2f AND \"\n      \"decision_rate %.2f < %.2f * initial_decision_rate %.2f\",\n      fast_glue, glue_margin, slow_glue, decision_rate,\n      decision_rate_margin, initial_decision_rate);\n    // Reset initial decision rate for next phase\n    *initial_decision_rate_ptr = decision_rate;\n    return solver->level > 0;\n  }\n\n  // Conflict limit trigger (secondary)\n  if (conflicts >= conflict_limit) {\n    kissat_extremely_verbose(\n      solver,\n      \"adaptive hybrid restart: conflicts %\" PRIu64 \" >= conflict limit %\" PRIu64,\n      conflicts, conflict_limit);\n    return solver->level > 0;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 491, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1307}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e6363e7081909f883af977d31c8c", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "70dfecafb1f79559b218579f3c605650", "body": {"id": "resp_04d0d483099da332006921e5f598fc8194992ad0465b6fb1cd", "object": "response", "created_at": 1763829237, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_04d0d483099da332006921e5f616548194b3760850f54ac194", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // Conflict-based trigger\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n  {\n    // Check glue/decision rate trigger for tie-breaking preference\n    const double fast_glue = AVERAGE (fast_glue);\n    const double slow_glue = AVERAGE (slow_glue);\n    const double decision_rate = AVERAGE (decision_rate);\n\n    // Use static variable to store initial decision rate\n    static double initial_decision_rate = 0.0;\n    if (initial_decision_rate == 0.0)\n      initial_decision_rate = decision_rate;\n\n    const double glue_margin = solver->stable ? 1.1 : 1.2;\n    const double rate_margin = 0.85;\n\n    bool glue_trigger = (fast_glue > glue_margin * slow_glue);\n    bool dr_trigger = (decision_rate < rate_margin * initial_decision_rate);\n\n    if (glue_trigger && dr_trigger)\n    {\n      initial_decision_rate = decision_rate; // Reset after restart\n      kissat_extremely_verbose (\n        solver,\n        \"adaptive hybrid: glue trigger (fast %.2f > %.2f * slow %.2f) and decision rate (%.2f < %.2f * initial %.2f)\",\n        fast_glue, glue_margin, slow_glue, decision_rate, rate_margin, initial_decision_rate);\n      return true;\n    }\n\n    // If only conflict trigger, fallback\n    kissat_extremely_verbose (\n      solver,\n      \"adaptive hybrid: conflict limit restart at %ld conflicts (limit %ld)\",\n      CONFLICTS, solver->limits.restart.conflicts);\n    return true;\n  }\n\n  // Glue and decision rate based trigger\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Use static variable to store initial decision rate\n  static double initial_decision_rate = 0.0;\n  if (initial_decision_rate == 0.0)\n    initial_decision_rate = decision_rate;\n\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double rate_margin = 0.85;\n\n  bool glue_trigger = (fast_glue > glue_margin * slow_glue);\n  bool dr_trigger = (decision_rate < rate_margin * initial_decision_rate);\n\n  if (glue_trigger && dr_trigger)\n  {\n    initial_decision_rate = decision_rate; // Reset after restart\n    kissat_extremely_verbose (\n      solver,\n      \"adaptive hybrid: glue trigger (fast %.2f > %.2f * slow %.2f) and decision rate (%.2f < %.2f * initial %.2f)\",\n      fast_glue, glue_margin, slow_glue, decision_rate, rate_margin, initial_decision_rate);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 669, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1485}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e636452c819086c3cfecbbf12cf3", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "9957c6d95a456a51f7b97e4ddc04d516", "body": {"id": "resp_06f16ca32dbe4d73006921e61163c08190b2d2312820d9ff35", "object": "response", "created_at": 1763829265, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_06f16ca32dbe4d73006921e611a0548190b132c347d551b501", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Initial decision rate average tracking\n  double *initial_decision_rate_ptr = &solver->initial_decision_rate_ewma;\n  if (*initial_decision_rate_ptr == 0.0)\n    *initial_decision_rate_ptr = decision_rate;\n  double initial_decision_rate = *initial_decision_rate_ptr;\n\n  // Margin for glue trigger\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double glue_limit = glue_margin * slow_glue;\n  const double decision_limit = 0.85 * initial_decision_rate;\n\n  bool glue_decision_trigger = (fast_glue > glue_limit) && (decision_rate < decision_limit);\n  bool conflict_trigger = (conflicts >= conflict_limit);\n\n  // Tie-breaking logic: Prefer glue/decision, then conflict, then level, then chronology\n  if (glue_decision_trigger) {\n    kissat_extremely_verbose (solver,\n      \"adaptive glue-decision restart: fast_glue %.2f > %.2f (margin * slow_glue %.2f) and decision_rate %.2f < %.2f (0.85 * initial_decision_rate %.2f)\",\n      fast_glue, glue_limit, slow_glue, decision_rate, decision_limit, initial_decision_rate);\n    *initial_decision_rate_ptr = decision_rate; // reset after glue/decision trigger\n    return true;\n  }\n\n  if (conflict_trigger) {\n    kissat_extremely_verbose (solver,\n      \"conflict limit restart: conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n      conflicts, conflict_limit);\n    return true;\n  }\n\n  // As a last tie-break, restart if level > 0\n  if (solver->level > 0) {\n    return false;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 503, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1319}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921e6363cac81909f7392f621bd1393", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "4c58a4e82473dff1ee8ee173592e6577", "body": {"id": "resp_0bdae087784213f1006921e5fce1b88196a7ecdd018aa3e53f", "object": "response", "created_at": 1763829244, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0bdae087784213f1006921e5fd5fdc81968602be8fd331646c", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Fast path: conflict limit\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    {\n      // Tie-breaking: prefer glue/decision rate trigger if it also fires\n      double fast_glue = AVERAGE (fast_glue);\n      double slow_glue = AVERAGE (slow_glue);\n      double decision_rate = AVERAGE (decision_rate);\n\n      // Retrieve or initialize initial_decision_rate_ewma\n      if (solver->initial_decision_rate_ewma == 0.0)\n        solver->initial_decision_rate_ewma = decision_rate;\n\n      const double glue_margin = solver->stable ? 1.1 : 1.2;\n      const double dr_margin = 0.85;\n\n      bool glue_trigger = (fast_glue > glue_margin * slow_glue);\n      bool decision_rate_trigger = (decision_rate < dr_margin * solver->initial_decision_rate_ewma);\n\n      if (glue_trigger && decision_rate_trigger)\n        {\n          kissat_extremely_verbose (solver,\n            \"restarting (glue/decision rate hybrid): fast_glue %.2f > %.2f * slow_glue %.2f AND decision_rate %.2f < %.2f * initial_decision_rate %.2f\",\n            fast_glue, glue_margin, slow_glue, decision_rate, dr_margin, solver->initial_decision_rate_ewma);\n          solver->initial_decision_rate_ewma = decision_rate;\n          return true;\n        }\n\n      // Otherwise, conflict limit triggers\n      kissat_extremely_verbose (solver,\n        \"restarting (conflict limit): conflicts %\" PRIu64 \" >= limit %\" PRIu64,\n        CONFLICTS, solver->limits.restart.conflicts);\n      return true;\n    }\n\n  // Slow path: glue/decision rate trigger\n  double fast_glue = AVERAGE (fast_glue);\n  double slow_glue = AVERAGE (slow_glue);\n  double decision_rate = AVERAGE (decision_rate);\n\n  // Retrieve or initialize initial_decision_rate_ewma\n  if (solver->initial_decision_rate_ewma == 0.0)\n    solver->initial_decision_rate_ewma = decision_rate;\n\n  const double glue_margin = solver->stable ? 1.1 : 1.2;\n  const double dr_margin = 0.85;\n\n  bool glue_trigger = (fast_glue > glue_margin * slow_glue);\n  bool decision_rate_trigger = (decision_rate < dr_margin * solver->initial_decision_rate_ewma);\n\n  if (glue_trigger && decision_rate_trigger)\n    {\n      kissat_extremely_verbose (solver,\n        \"restarting (glue/decision rate hybrid): fast_glue %.2f > %.2f * slow_glue %.2f AND decision_rate %.2f < %.2f * initial_decision_rate %.2f\",\n        fast_glue, glue_margin, slow_glue, decision_rate, dr_margin, solver->initial_decision_rate_ewma);\n      solver->initial_decision_rate_ewma = decision_rate;\n      return true;\n    }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 816, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 711, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1527}, "user": null, "metadata": {}}}, "error": null}
