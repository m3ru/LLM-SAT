{"id": "batch_req_69213c53fc2c819086a5d2468798b13b", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "fdc46bdfd070122082ffefcd937b292f", "body": {"id": "resp_01ccc5f1a1a488550069213902e304819bb6426f931b2ced5b", "object": "response", "created_at": 1763784962, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_01ccc5f1a1a4885500692139037644819b955e7844f3b9c205", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Restart if conflicts reach or exceed the restart conflict limit\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // If stable phase, skip glue/decision checks and continue\n  if (solver->stable)\n    return false;\n\n  // Compute current EWMA values\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Reference value from last restart\n  const double last_decision_rate = solver->restart.reference_decision_rate_ewma;\n\n  // Check glue difference\n  const double glue_threshold = slow_glue + 2.0;\n  const bool glue_trigger = (fast_glue > glue_threshold);\n\n  // Check decision rate drop by at least 5%\n  const double expected_drop = 0.95 * last_decision_rate;\n  const bool decision_rate_trigger = (decision_rate <= expected_drop);\n\n  // If both triggers fire, prioritize conflict limit (already handled above)\n  // Else check glue and decision triggers\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 305, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 915}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c5428048190900f73cfefc75b09", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "edf139e7e4f4e013575bf2eaf39c06e3", "body": {"id": "resp_07d63d45c79346e700692138a6f8a48198adfb0680084dbf01", "object": "response", "created_at": 1763784871, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_07d63d45c79346e700692138a764b48198a8ee58726498f238", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  if (!GET_OPTION(restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // 1. Conflict-based restart (priority)\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // 2. Don't restart in stable mode.\n  if (solver->stable)\n    return false;\n\n  // 3. AGDRR: Glue and decision-rate restarts.\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n  const double glue_threshold = slow_glue + 2.0;\n\n  // Decision rate EWMA and tracking.\n  const double curr_decision_rate = AVERAGE(decision_rate);\n  const double ref_decision_rate = solver->restart.last_decision_rate_ewma;\n  const double decision_rate_limit = 0.95 * ref_decision_rate;\n\n  // Only trigger if glue and decision rate conditions met.\n  if (fast_glue > glue_threshold &&\n      (curr_decision_rate <= decision_rate_limit)) {\n    kissat_extremely_verbose(\n      solver,\n      \"restarting: fast_glue %g > slow_glue+2 = %g, \"\n      \"decision_rate_ewma %g <= 0.95*last_restart %g\",\n      fast_glue, glue_threshold, curr_decision_rate, decision_rate_limit);\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 334, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 944}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c54161c8190acd2fab9eea04c88", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "10a8d3ee150104cb1e553e2f9422eb53", "body": {"id": "resp_07171224214f014f00692139040be08198a8982d3565018d5a", "object": "response", "created_at": 1763784964, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_07171224214f014f0069213904929c8198b6df6decff027c18", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Conflict limit trigger\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // In stable mode, skip glue/decision checks\n  if (solver->stable)\n    return false;\n\n  // Glue-Decay + Decision Rate trigger\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n  const double glue_threshold = slow_glue + 2.0;\n\n  // Use solver->decision_rate_ewma as current; solver->decision_rate_ewma_at_last_restart as stored\n  const double curr_decision_rate = solver->decision_rate_ewma;\n  const double last_decision_rate = solver->decision_rate_ewma_at_last_restart;\n  // 0.95 * last_decision_rate for 5% drop\n  const double drop_limit = 0.95 * last_decision_rate;\n\n  bool glue_trigger = (fast_glue > glue_threshold);\n  bool decision_rate_trigger = (curr_decision_rate <= drop_limit);\n\n  kissat_extremely_verbose(\n    solver,\n    \"AGDRR restart: fast_glue=%.2f slow_glue=%.2f (threshold=%.2f), \"\n    \"curr_decision_rate=%.4f last_decision_rate=%.4f (limit=%.4f), \"\n    \"glue_trigger=%d decision_rate_trigger=%d conflicts=%\" PRIu64 \" limit=%\" PRIu64,\n    fast_glue, slow_glue, glue_threshold,\n    curr_decision_rate, last_decision_rate, drop_limit,\n    glue_trigger, decision_rate_trigger,\n    CONFLICTS, solver->limits.restart.conflicts\n  );\n\n  // If both triggers fire, conflict limit takes priority (already handled above)\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  // Tie-breaking: if decision_rate_ewma drop equals exactly 5%, trigger restart\n  if (glue_trigger && (curr_decision_rate == drop_limit))\n    return true;\n\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  // Single trigger: glue and decision rate\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  // Only trigger when both glue and decision rate conditions hold\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 602, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1212}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c53f62881909c6cea3c0e75e416", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "d7e78484722f6e4ed2d853fd25620f24", "body": {"id": "resp_0140a1f16d24460a00692138a7192c819aacb5a801f508bd77", "object": "response", "created_at": 1763784871, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0140a1f16d24460a00692138a797e8819a9ad2324c2ee5ad81", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  // Check if restarts are enabled\n  if (!GET_OPTION(restart))\n    return false;\n\n  // Only restart if not at root level\n  if (!solver->level)\n    return false;\n\n  // Priority: conflicts limit\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // If in stable mode, do not trigger AGDRR\n  if (solver->stable)\n    return false;\n\n  // Fetch fast and slow glue averages\n  const double fast = AVERAGE(fast_glue);\n  const double slow = AVERAGE(slow_glue);\n\n  // AGDRR: Check if glue gap threshold is crossed\n  if (fast > slow + 2.0) {\n    // Decision rate EWMA\n    const double curr_decision_rate = AVERAGE(decision_rate);\n    // Reference decision rate at last restart\n    const double last_restart_decision_rate = solver->restart_decision_rate_ewma_ref;\n\n    // Compute relative drop (negative means dropped)\n    const double ratio = curr_decision_rate / last_restart_decision_rate;\n\n    // Trigger if dropped by 5% or more (i.e. <= 0.95)\n    if (ratio <= 0.95) {\n      kissat_extremely_verbose(\n        solver,\n        \"AGDRR: fast_glue %.2f > slow_glue %.2f + 2.0, \"\n        \"decision_rate_ewma %.6f dropped by %.2f%% (from %.6f)\",\n        fast,\n        slow,\n        curr_decision_rate,\n        100.0 * (1.0 - ratio),\n        last_restart_decision_rate\n      );\n      return true;\n    }\n  }\n\n  // No restart condition met\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 401, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1011}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c540780819088d3d21b8ca91775", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "070b568ed3057363efa3f747f7bcf627", "body": {"id": "resp_043c7a7e58720afc00692138a71d18819ba977cccda468f93e", "object": "response", "created_at": 1763784871, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_043c7a7e58720afc00692138a78328819bbc75ad8f519ef725", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  // Option check: are restarts enabled?\n  if (!GET_OPTION(restart))\n    return false;\n\n  // Only consider restarting if not at root level.\n  if (!solver->level)\n    return false;\n\n  // First restart trigger: conflict-based.\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // If in stable phase, do not consider glue/decision heuristics.\n  if (solver->stable)\n    return false;\n\n  // Compute EWMA values for glue.\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n\n  // Compute EWMA value for decision rate.\n  const double decision_rate = AVERAGE(decision_rate);\n\n  // Use the stored reference from the last restart.\n  const double ref_decision_rate = solver->restart.reference_decision_rate;\n\n  // Check glue and decision rate conditions.\n  bool glue_condition = (fast_glue > slow_glue + 2.0);\n  bool decision_condition = (decision_rate <= 0.95 * ref_decision_rate);\n\n  // Tie-breaking: If both triggers, conflict-limit has priority (already handled above).\n\n  // If glue and decision rate conditions are met, trigger restart.\n  if (glue_condition && decision_condition)\n    return true;\n\n  // Otherwise, do not restart.\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 319, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 929}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c53faf8819091aa0e2773a5c881", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "4d807cec90c836726ae6141650b38558", "body": {"id": "resp_007d3a6510edf41400692138ab26fc819aa4535828cefaef14", "object": "response", "created_at": 1763784875, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_007d3a6510edf41400692138ab8124819abab820e8de901d6d", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // 1. Restart if conflict limit reached (highest priority)\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // 2. If in stable mode, do not use glue/decision heuristic\n  if (solver->stable)\n    return false;\n\n  // 3. Adaptive Glue-Decay Decision Rate Restart (AGDRR) heuristic\n  const double fast = AVERAGE(fast_glue);\n  const double slow = AVERAGE(slow_glue);\n\n  // Retrieve current and last restart's decision-rate EWMA\n  const double curr_dec_rate = AVERAGE(decision_rate);\n  const double last_restart_dec_rate = solver->restart.last_decision_rate_ewma;\n\n  // Only apply the heuristic if enough stats are available\n  // (otherwise, skip to avoid division by zero or invalid logic)\n  if (slow > 0.0 && last_restart_dec_rate > 0.0) {\n    // AGDRR logic: trigger restart if (fast > slow + 2.0) and\n    // (curr_dec_rate < 0.95 * last_restart_dec_rate)\n    // If equal to exactly 5% drop, also trigger.\n    const double threshold = 0.95 * last_restart_dec_rate;\n    if (fast > slow + 2.0 && curr_dec_rate <= threshold) {\n      return true;\n    }\n  }\n\n  // No restart triggered\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 355, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 965}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c5404848190b15b85b68b6a9b30", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "74b4567b6b5e7ae91e8923d0473eb017", "body": {"id": "resp_0ef2497015684f4300692138ac01bc8198af831a5d074ae63c", "object": "response", "created_at": 1763784876, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0ef2497015684f4300692138ac70208198ae6c02abe160e9b7", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // First trigger: conflicts reached restart limit\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // If in stable mode, do not trigger restarts based on glue/decision heuristics\n  if (solver->stable)\n    return false;\n\n  // Compute EWMA values for glue\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n\n  // Decision rate EWMA (decisions per conflict, or similar)\n  const double current_decision_rate_ewma = AVERAGE (decision_rate);\n\n  // Reference value: stored at last restart\n  const double ref_decision_rate_ewma = solver->restart.last_decision_rate_ewma;\n\n  // Compute threshold: 0.95 \u00d7 reference (5% drop)\n  const double threshold_decision_rate_ewma = 0.95 * ref_decision_rate_ewma;\n\n  // Second trigger: glue and decision rate\n  bool glue_trigger = (fast_glue > slow_glue + 2.0);\n  bool decision_rate_trigger = (current_decision_rate_ewma <= threshold_decision_rate_ewma);\n\n  // If both triggers fire, conflicts takes priority (already checked above)\n  if (glue_trigger && decision_rate_trigger)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 340, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 950}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c5403b08190985d53c813d04afd", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "43ee6634258728110f931089e79c0b37", "body": {"id": "resp_0fc669e0ecdb516700692138ad84c4819bbbfbc2843e29ea09", "object": "response", "created_at": 1763784877, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0fc669e0ecdb516700692138adfe34819bb3dfd737fa15113f", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // 1. Conflict limit check (highest priority)\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // 2. Stable phase: skip glue/decision checks\n  if (solver->stable)\n    return false;\n\n  // 3. Adaptive Glue-Decay Decision Rate Restart (AGDRR) heuristic\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n  const double glue_threshold = slow + 2.0;\n\n  // Use the 'decision_rate_ema' field for current decision rate EWMA\n  // Use 'decision_rate_at_last_restart' for reference value at last restart\n  const double current_decision_rate = solver->decision_rate_ema;\n  const double last_restart_decision_rate = solver->decision_rate_at_last_restart;\n  const double drop_limit = 0.95 * last_restart_decision_rate;\n\n  // If fast glue sufficiently higher and decision rate dropped 5% or more\n  if (fast > glue_threshold) {\n    if (current_decision_rate < drop_limit ||\n        (last_restart_decision_rate > 0.0 &&\n         fabs(current_decision_rate - drop_limit) < 1e-12)) {\n      // (drop equals or exceeds 5%; tie-breaker: trigger if equal)\n      kissat_extremely_verbose(\n        solver,\n        \"AGDRR triggered: fast_glue=%g > slow_glue+2=%g, decision_rate=%.10g < 0.95*last=%.10g\",\n        fast, glue_threshold, current_decision_rate, drop_limit\n      );\n      return true;\n    }\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 411, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1021}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c54ee048190a8d6ad8d554c3ec4", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "54037915b5a581636b185764bbcc8844", "body": {"id": "resp_00b6cb5c9843e14400692138ad860c819ba647daf5f5d65355", "object": "response", "created_at": 1763784877, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_00b6cb5c9843e14400692138adff44819b806337e015409c31", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n    assert(solver->unassigned);\n\n    // Option check for restarts\n    if (!GET_OPTION(restart))\n        return false;\n\n    // Only restart if not at root level\n    if (!solver->level)\n        return false;\n\n    // Tie-breaker: always prioritize hard conflict limit\n    if (CONFLICTS >= solver->limits.restart.conflicts)\n        return true;\n\n    // If in stable mode, skip glue/decision checks\n    if (solver->stable)\n        return false;\n\n    // Compute EWMA values for glue\n    const double fast_glue = AVERAGE(fast_glue);\n    const double slow_glue = AVERAGE(slow_glue);\n\n    // Compute EWMA value for decision rate (assume kissat maintains this)\n    const double decision_rate = AVERAGE(decision_rate);\n\n    // Reference value for decision_rate at last restart\n    double last_restart_decision_rate = solver->restart.last_decision_rate_ewma;\n\n    // Check glue gap condition\n    const double glue_gap = 2.0;\n    bool glue_trigger = (fast_glue > slow_glue + glue_gap);\n\n    // Check decision rate drop condition (5% drop)\n    const double drop_factor = 0.95;\n    bool dec_rate_trigger = (decision_rate < drop_factor * last_restart_decision_rate);\n\n    // If both triggers fire, conflicts is already prioritized above, so only glue+decision below\n    if (glue_trigger && dec_rate_trigger) {\n        return true;\n    }\n\n    // If glue trigger but not decision rate, don't restart\n    // If decision rate trigger but not glue, don't restart\n    // Only restart if both glue and decision triggers fire\n    return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 378, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 988}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_69213c53fda881908c22a1407ff38369", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "e973f5b5e825eb9c087f08069ef21645", "body": {"id": "resp_004ac07f3c18b3800069213c486464819baa22031f3dd0df7a", "object": "response", "created_at": 1763785800, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_004ac07f3c18b3800069213c49a8ac819bbbfe16c0ef785352", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // 1. Conflict limit trigger (highest priority)\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // 2. Only apply glue/decision-heuristic triggers in non-stable phase\n  if (solver->stable)\n    return false;\n\n  // AGDRR: fast_glue_ewma > slow_glue_ewma + 2.0\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n  const double glue_threshold = slow + 2.0;\n\n  // We assume decision_rate_ewma and last_restart_decision_rate are maintained in solver.\n  // The reference value is updated after each restart elsewhere.\n  const double decision_rate_ewma = solver->decision_rate_ewma;\n  const double last_restart_decision_rate = solver->last_restart_decision_rate;\n  const double drop_limit = 0.95 * last_restart_decision_rate;\n\n  kissat_extremely_verbose (\n      solver,\n      \"AGDRR: fast_glue=%.2f slow_glue=%.2f threshold=%.2f dec_rate=%.4f prev=%.4f limit=%.4f\",\n      fast, slow, glue_threshold, decision_rate_ewma, last_restart_decision_rate, drop_limit\n  );\n\n  if (fast > glue_threshold) {\n    if (decision_rate_ewma < drop_limit ||\n        kissat_double_equals (decision_rate_ewma, drop_limit)) {\n      // Restart due to glue/decision-rate trigger\n      return true;\n    }\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 610, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 396, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1006}, "user": null, "metadata": {}}}, "error": null}
