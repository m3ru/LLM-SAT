{"id": "batch_req_6921efa6d22481908a31a7b121e96fc5", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "16315d299e15427e6e8fe146ab1e91c5", "body": {"id": "resp_027841af1c86818c006921ec1035d881a38080431bf6ec3df7", "object": "response", "created_at": 1763830800, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_027841af1c86818c006921ec10789881a3a24591846c4909ce", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // --- AGDDR parameters ---\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  const double glue_delta = fast_glue - slow_glue;\n  // Avoid division by zero\n  const double denom = decision_rate > 1e-9 ? decision_rate : 1.0;\n  const double trigger_score = glue_delta / denom;\n\n  const uint64_t conflicts = CONFLICTS;\n  const uint64_t since_last_restart = conflicts - solver->limits.restart.last;\n\n  // AGDDR: check glue-delta & decision rate trigger\n  if (glue_delta >= glue_delta_threshold &&\n      since_last_restart >= min_conflicts &&\n      trigger_score > 0.5) {\n    kissat_extremely_verbose (\n      solver,\n      \"AGDDR restart: glue_delta %g >= %g, conflicts since last restart %\"\n      PRIu64 \" >= %u, trigger_score %g > 0.5\",\n      glue_delta, glue_delta_threshold, since_last_restart, min_conflicts, trigger_score\n    );\n    return true;\n  }\n\n  // Fallback: legacy conflict limit trigger\n  if (conflicts >= solver->limits.restart.conflicts) {\n    // Stable mode: reluctant restart trigger\n    if (solver->stable)\n      return kissat_reluctant_triggered (&solver->reluctant);\n    // Focused: (legacy Luby)\n    return true;\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 406, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1737}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f4908190b9f3893bc140bd7c", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "4b11bd4ec07a817c8432612dfbef6ba4", "body": {"id": "resp_0445b53095c1a6c5006921ec4c3ff4819f95bd584f41064275", "object": "response", "created_at": 1763830860, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0445b53095c1a6c5006921ec4c823c819f98b68c0f0f8d1216", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDDR parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-12 ? decision_rate : 1.0);\n\n  // Conflicts since last restart\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflicts_limit = solver->limits.restart.conflicts;\n\n  // Check AGDDR triggers\n  if (\n    glue_delta >= glue_delta_threshold &&\n    conflicts >= conflicts_limit + min_conflicts &&\n    trigger_score > 0.5\n  ) {\n    kissat_extremely_verbose (\n      solver,\n      \"AGDDR restart: glue_delta %.2f >= %.2f, conflicts %llu >= %llu+%u, trigger_score %.2f > 0.5\",\n      glue_delta,\n      glue_delta_threshold,\n      (unsigned long long) conflicts,\n      (unsigned long long) conflicts_limit,\n      min_conflicts,\n      trigger_score\n    );\n    return true;\n  }\n\n  // Fallback: conflict limit\n  if (conflicts >= conflicts_limit) {\n    if (solver->stable)\n      return kissat_reluctant_triggered (&solver->reluctant);\n    kissat_extremely_verbose (\n      solver,\n      \"conflict limit restart: %llu >= %llu\",\n      (unsigned long long) conflicts,\n      (unsigned long long) conflicts_limit\n    );\n    const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n    const double limit = margin * slow_glue;\n    return (limit <= fast_glue);\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 465, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1796}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa71a2c8190b5b358962f098dc4", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "68341cb4b0aa1e2554c8b693d1d2a389", "body": {"id": "resp_00d989f4a721f331006921ec4c3a3881a2a70d0089060f8266", "object": "response", "created_at": 1763830860, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_00d989f4a721f331006921ec4c88e081a2bf279b111693fa7b", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Parameters for AGDDR algorithm\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Compute \u0394 and trigger score\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = (decision_rate > 0.0)\n    ? glue_delta / decision_rate\n    : glue_delta; // avoid division by zero\n\n  // Number of conflicts since last restart trigger\n  const unsigned conflicts = CONFLICTS;\n  const unsigned conflict_limit = solver->limits.restart.conflicts;\n\n  // AGDDR: glue-delta trigger\n  if (glue_delta >= glue_delta_threshold &&\n      conflicts >= min_conflicts &&\n      trigger_score > 0.5) {\n    kissat_extremely_verbose (solver,\n      \"AGDDR restart: \u0394=%.2f (threshold %.2f), trigger_score=%.2f (>0.5), conflicts=%u (>= %u)\",\n      glue_delta, glue_delta_threshold, trigger_score, conflicts, min_conflicts);\n    return true;\n  }\n\n  // Fallback: classic conflict limit or stable reluctant trigger\n  if (conflicts < conflict_limit)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // Legacy glue-based margin fallback for non-stable\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow_glue;\n  kissat_extremely_verbose (solver,\n    \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow_glue,\n    (limit > fast_glue    ? '>'\n     : limit == fast_glue ? '='\n                          : '<'),\n    fast_glue);\n  return (limit <= fast_glue);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 500, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1831}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f99c8190b67d94d4f411a8a6", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "1ab416ee7e2a2a6f59b7dd4266634236", "body": {"id": "resp_078432156cb4bdcc006921ec4c52fc81a19a770d227cdc4709", "object": "response", "created_at": 1763830860, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_078432156cb4bdcc006921ec4c971881a1876540b4af22e864", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // AGDDR parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  const double fast = AVERAGE (fast_glue);\n  const double slow = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  const double delta = fast - slow;\n  const double trigger_score = delta / (decision_rate > 1e-12 ? decision_rate : 1.0);\n\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t last_restart = solver->limits.restart.conflicts;\n  const uint64_t since_last_restart = conflicts - last_restart;\n\n  // AGDDR: glue-delta & decision rate trigger\n  if (delta >= glue_delta_threshold &&\n      since_last_restart >= min_conflicts &&\n      trigger_score > 0.5) {\n    kissat_extremely_verbose (solver,\n      \"AGDDR restart: delta=%.2f, threshold=%.2f, since_last_restart=%\" PRIu64 \", min_conflicts=%u, trigger_score=%.2f > 0.5\",\n      delta, glue_delta_threshold, since_last_restart, min_conflicts, trigger_score);\n    return true;\n  }\n\n  // Fallback: conflict limit or default strategy\n  if (conflicts < solver->limits.restart.conflicts)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // Maintain legacy glue margin fallback for default\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow;\n  kissat_extremely_verbose (solver,\n    \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow,\n    (limit > fast ? '>' : limit == fast ? '=' : '<'),\n    fast);\n  return (limit <= fast);\n}\n</code>\n"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 475, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1806}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f5cc8190bde50686c96e2ad2", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "215a8aa9b2cb5886b5e3c7346b42509a", "body": {"id": "resp_0bfe3f1274d76b6d006921ec10535481a392ad6cd58e68329b", "object": "response", "created_at": 1763830800, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0bfe3f1274d76b6d006921ec109ff081a3823f3d16757a1ac4", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDDR: Adaptive Glue-Delta & Decision Rate Restart\n  // Parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n  const double decision_rate = AVERAGE(decision_rate);\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-12 ? decision_rate : 1.0);\n\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t restart_limit = solver->limits.restart.conflicts;\n\n  // Compute number of conflicts since last restart\n  // In Kissat, restart_limit is set to 'conflicts + interval' at last restart\n  // So, interval = restart_limit - conflicts at last restart\n  // Number of conflicts since last restart = conflicts - (restart_limit - interval)\n  // But we can just use: (conflicts >= restart_limit) means time for conflict-based restart\n\n  // AGDDR glue-delta trigger\n  bool glue_delta_trigger = false;\n  if (glue_delta >= glue_delta_threshold) {\n    // Number of conflicts since last restart:\n    uint64_t interval = restart_limit > conflicts ? restart_limit - conflicts : 0;\n    uint64_t last_restart_conflicts = restart_limit - interval;\n    uint64_t since_last_restart = conflicts - last_restart_conflicts;\n    if (since_last_restart >= min_conflicts && trigger_score > 0.5)\n      glue_delta_trigger = true;\n  }\n\n  // Priority: glue-delta trigger first, fallback to regular conflict limit\n  if (glue_delta_trigger)\n    return true;\n\n  if (conflicts >= restart_limit)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 450, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1781}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f0dc8190a7cfa2a68fc1fe80", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "01002ad7ccb0d5b55ef53f773c93ea27", "body": {"id": "resp_0f79326577b0c009006921efa00bdc81a1ba4d6fa18fdf17db", "object": "response", "created_at": 1763831712, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0f79326577b0c009006921efa0aa2081a19307998991dc4c2d", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Parameters for AGDDR\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-9 ? decision_rate : 1.0);\n\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t last_restart_conflicts = solver->limits.restart.conflicts - solver->limits.restart.interval;\n  const uint64_t since_last_restart = conflicts > last_restart_conflicts ? \n    conflicts - last_restart_conflicts : 0;\n\n  // AGDDR priority: glue-delta first, fallback to conflict limit\n  if (glue_delta >= glue_delta_threshold &&\n      since_last_restart >= min_conflicts &&\n      trigger_score > 0.5) {\n    kissat_extremely_verbose (solver,\n      \"AGDDR restart: glue_delta %.2f (fast=%.2f, slow=%.2f) >= %.2f, since_last_restart=%\" PRIu64 \" >= %u, trigger_score=%.2f > 0.5\",\n      glue_delta, fast_glue, slow_glue, glue_delta_threshold, since_last_restart, min_conflicts, trigger_score);\n    return true;\n  }\n\n  // Standard fallback: conflict limit or stable mode logic\n  if (CONFLICTS < solver->limits.restart.conflicts)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // Default glue-based restart (for compatibility)\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow_glue;\n  kissat_extremely_verbose (solver,\n    \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow_glue,\n    (limit > fast_glue ? '>' : limit == fast_glue ? '=' : '<'),\n    fast_glue);\n  return (limit <= fast_glue);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 550, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1881}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6ca548190a02619a883f3239f", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "a194d2c1abe90a4c67565032bebd32c5", "body": {"id": "resp_044bf7c8a81be919006921ec1055a481a3a68fe071540a8043", "object": "response", "created_at": 1763830800, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_044bf7c8a81be919006921ec10962c81a38db32c6d50d070b2", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDDR parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-9 ? decision_rate : 1.0);\n\n  // Number of conflicts since last restart\n  const uint64_t conflicts = CONFLICTS;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n\n  // AGDDR glue-delta trigger\n  if (glue_delta >= glue_delta_threshold &&\n      conflicts >= min_conflicts &&\n      trigger_score > 0.5) {\n    kissat_extremely_verbose (solver,\n      \"AGDDR restart: glue_delta %.2f >= %.2f, conflicts %llu >= %u, trigger_score %.2f > 0.5\",\n      glue_delta, glue_delta_threshold, conflicts, min_conflicts, trigger_score);\n    return true;\n  }\n\n  // Fallback: conflict limit trigger\n  if (conflicts >= conflict_limit) {\n    if (solver->stable)\n      return kissat_reluctant_triggered (&solver->reluctant);\n    kissat_extremely_verbose (solver,\n      \"AGDDR fallback: conflict limit reached (%llu >= %llu)\",\n      conflicts, conflict_limit);\n    const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n    const double limit = margin * slow_glue;\n    kissat_extremely_verbose (solver,\n      \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n      limit, margin, slow_glue,\n         (limit > fast_glue ? '>' : limit == fast_glue ? '=' : '<'), fast_glue);\n    return (limit <= fast_glue);\n  }\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 495, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1826}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f2cc8190a9d43735075f3084", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "a3c67d8a0fbc134261b973c93e62343e", "body": {"id": "resp_0fd1cb755938401e006921ec12e1dc81a1add9a9373fd8dcf6", "object": "response", "created_at": 1763830802, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0fd1cb755938401e006921ec1335d481a1992548d1b022b165", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDDR parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Calculate differences and trigger score\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-12 ? decision_rate : 1.0);\n\n  // Check glue-delta trigger\n  if (glue_delta >= glue_delta_threshold &&\n      (CONFLICTS >= solver->limits.restart.conflicts + min_conflicts) &&\n      trigger_score > 0.5)\n  {\n    kissat_extremely_verbose (\n      solver,\n      \"AGDDR trigger: glue_delta %.2f >= %.2f, conflicts since last restart = %ld, trigger_score %.2f > 0.5\",\n      glue_delta, glue_delta_threshold,\n      (long)(CONFLICTS - solver->limits.restart.conflicts),\n      trigger_score);\n    return true;\n  }\n\n  // Fallback: classic conflict limit or stable-phase reluctant\n  if (CONFLICTS < solver->limits.restart.conflicts)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // Classic glue-based restart as fallback\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow_glue;\n  kissat_extremely_verbose (\n    solver,\n    \"fallback glue limit %g = %.2f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow_glue,\n    (limit > fast_glue ? '>' :\n     limit == fast_glue ? '=' : '<'),\n    fast_glue);\n\n  return (limit <= fast_glue);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 479, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1810}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f44481909a140509b2c6c58e", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "1879e97ca1aada0d6e033379b6428f94", "body": {"id": "resp_075bcc28bdd5cdd2006921ec15187881a18c59b04dce7f6b57", "object": "response", "created_at": 1763830805, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_075bcc28bdd5cdd2006921ec15551c81a1b3ad2caa0c3b9fc2", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // AGDDR parameters\n  const double glue_delta_threshold = 2.0;\n  const unsigned min_conflicts = 50;\n\n  // Gather statistics\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t last_restart_conflicts = solver->limits.restart.conflicts;\n  const uint64_t since_last_restart = conflicts - last_restart_conflicts;\n\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n  const double decision_rate = AVERAGE(decision_rate);\n\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = (decision_rate > 0.0)\n    ? (glue_delta / decision_rate)\n    : glue_delta; // avoid div by zero\n\n  // AGDDR: Glue-delta + decision rate restart\n  if (\n    glue_delta >= glue_delta_threshold &&\n    since_last_restart >= min_conflicts &&\n    trigger_score > 0.5\n  ) {\n    kissat_extremely_verbose (\n      solver,\n      \"adaptive glue-delta restart: \u0394=%.2f (fast=%.2f, slow=%.2f), decision_rate=%.2f, trigger_score=%.2f (thresholds: \u0394>=%.2f, conflicts>=%u, score>0.5)\",\n      glue_delta, fast_glue, slow_glue, decision_rate, trigger_score,\n      glue_delta_threshold, min_conflicts\n    );\n    return true;\n  }\n\n  // Fallback: traditional conflict limit\n  if (conflicts < solver->limits.restart.conflicts)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // (Retain original margin-based fallback for non-stable phase)\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow_glue;\n  kissat_extremely_verbose (\n    solver,\n    \"restart glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow_glue,\n    (limit > fast_glue    ? '>'\n      : limit == fast_glue ? '='\n      : '<'),\n    fast_glue\n  );\n  return (limit <= fast_glue);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 556, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1887}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921efa6f28c8190930f27530b2dee4c", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "6efaf3f1710b6ccf7430671fac054e23", "body": {"id": "resp_0c12f5dfc6b1cf84006921ec155c5c81a0a34facc6c25575b8", "object": "response", "created_at": 1763830805, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0c12f5dfc6b1cf84006921ec15a63c81a0ba12aba6632ab408", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Fetch current statistics and averages\n  const uint64_t conflicts = solver->statistics.conflicts;\n  const uint64_t conflict_limit = solver->limits.restart.conflicts;\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // AGDDR parameters (can be made options if desired)\n  const double glue_delta_threshold = 2.0;\n  const uint64_t min_conflicts = 50;\n\n  // Compute glue delta and trigger score\n  const double glue_delta = fast_glue - slow_glue;\n  const double trigger_score = glue_delta / (decision_rate > 1e-9 ? decision_rate : 1.0);\n\n  // Main AGDDR trigger\n  if (\n      glue_delta >= glue_delta_threshold &&\n      conflicts >= conflict_limit + min_conflicts && // >= since last restart\n      trigger_score > 0.5\n  ) {\n    kissat_extremely_verbose (\n      solver,\n      \"AGDDR restart: glue_delta=%g (threshold=%g), trigger_score=%g, conflicts=%\" PRIu64 \" (min=%\" PRIu64 \")\",\n      glue_delta, glue_delta_threshold, trigger_score, conflicts, conflict_limit + min_conflicts\n    );\n    return true;\n  }\n\n  // Fallback: traditional conflict limit\n  if (conflicts < conflict_limit)\n    return false;\n\n  if (solver->stable)\n    return kissat_reluctant_triggered (&solver->reluctant);\n\n  // Default fallback: glue margin restart\n  const double margin = (100.0 + GET_OPTION (restartmargin)) / 100.0;\n  const double limit = margin * slow_glue;\n  kissat_extremely_verbose (\n    solver,\n    \"fallback restart: glue limit %g = %.02f * %g (slow glue) %c %g (fast glue)\",\n    limit, margin, slow_glue,\n    (limit > fast_glue ? '>' : limit == fast_glue ? '=' : '<'),\n    fast_glue\n  );\n  return (limit <= fast_glue);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 1331, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 508, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1839}, "user": null, "metadata": {}}}, "error": null}
