{"id": "batch_req_6921ec5c46888190ba136e4bc54a16aa", "custom_id": "req-0001", "response": {"status_code": 200, "request_id": "be08e2f94b974fd9d87a885bc9cb35ce", "body": {"id": "resp_0e2f31fbd7552b92006921ec557470819096e865b157efdb0c", "object": "response", "created_at": 1763830869, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0e2f31fbd7552b92006921ec55fbcc81909b60f7bb065d0cd0", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard cap: restart if conflicts exceed limit\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get current EWMA values\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Maintain an EWMA of decision rate as a long-term average.\n  // Use solver->average_decision_rate as the stateful variable.\n  // Initialize to current decision rate if unset (zero).\n  if (solver->average_decision_rate == 0.0)\n    solver->average_decision_rate = decision_rate;\n\n  // Update average_decision_rate\n  solver->average_decision_rate =\n    0.98 * solver->average_decision_rate + 0.02 * decision_rate;\n\n  // Set thresholds depending on stable mode\n  double glue_threshold = 1.15;\n  double decision_threshold = 0.85;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    decision_threshold = 0.70;\n  }\n\n  const double glue_limit = glue_threshold * slow_glue;\n  const double decision_limit = decision_threshold * solver->average_decision_rate;\n\n  // Compose verbose output for debugging\n  kissat_extremely_verbose (\n    solver,\n    \"adaptive glue-decision restart: \"\n    \"fast_glue=%g slow_glue=%g (limit=%g), \"\n    \"decision_rate=%g avg_decision_rate=%g (limit=%g), \"\n    \"stable=%d\",\n    fast_glue, slow_glue, glue_limit,\n    decision_rate, solver->average_decision_rate, decision_limit,\n    solver->stable);\n\n  // Restart if both glue and decision conditions are met\n  if (fast_glue > glue_limit && decision_rate < decision_limit)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 458, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1246}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c42d081908eb0b54b47c722e4", "custom_id": "req-0002", "response": {"status_code": 200, "request_id": "359feef986472d07e7a014d8fd13a36c", "body": {"id": "resp_0e37102960310226006921ec1817a88197a9f9f391f3ac9848", "object": "response", "created_at": 1763830808, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0e37102960310226006921ec185aac819782806b29c9807c9e", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Conflict hard cap\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get current averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = solver->averages[solver->stable].decision_rate.value;\n\n  // Average decision rate EWMA state (persistent in solver struct)\n  double *avg_decision_rate = &solver->averages[solver->stable].average_decision_rate;\n  // If never initialized, set to current\n  if (*avg_decision_rate == 0.0)\n    *avg_decision_rate = decision_rate;\n  else\n    *avg_decision_rate = 0.98 * (*avg_decision_rate) + 0.02 * decision_rate;\n\n  // Set thresholds depending on stable mode\n  double glue_factor = solver->stable ? 1.30 : 1.15;\n  double decision_factor = solver->stable ? 0.70 : 0.85;\n\n  bool glue_condition = (fast_glue > glue_factor * slow_glue);\n  bool decision_condition = (decision_rate < decision_factor * (*avg_decision_rate));\n\n  kissat_extremely_verbose (solver,\n    \"restart glue %.2f %s %.2f * %.2f (%.2f)  decision_rate %.2f %s %.2f * %.2f (%.2f)\",\n    fast_glue, (glue_condition ? \">\" : \"<=\"), glue_factor, slow_glue, glue_factor*slow_glue,\n    decision_rate, (decision_condition ? \"<\" : \">=\"), decision_factor, *avg_decision_rate, decision_factor*(*avg_decision_rate)\n  );\n\n  // Adaptive glue-decision hybrid restart\n  if (glue_condition && decision_condition)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 453, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1241}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c4f348190880d3c6328f67cd1", "custom_id": "req-0003", "response": {"status_code": 200, "request_id": "88b0ebb920809cf69d1552dd014d15e5", "body": {"id": "resp_01af479840761363006921ec550df88194b3b9b6c894c0e963", "object": "response", "created_at": 1763830869, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_01af479840761363006921ec556f1c8194829a0a240fda9293", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard cap: standard conflict limit\n  if (solver->statistics.conflicts >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get averages and decision rate\n  const int mode = solver->stable;\n  const double fast_glue = solver->averages[mode].fast_glue.value;\n  const double slow_glue = solver->averages[mode].slow_glue.value;\n  const double decision_rate = solver->averages[mode].decision_rate.value;\n\n  // Maintain an EWMA of decision_rate as average_decision_rate\n  // Place the variable in solver struct if not already present\n  double *avg_ptr = &solver->adaptive_average_decision_rate;\n  if (!*avg_ptr)\n    *avg_ptr = decision_rate; // initialize if first call\n\n  // Update EWMA: avg = 0.98 * avg + 0.02 * curr\n  *avg_ptr = 0.98 * (*avg_ptr) + 0.02 * decision_rate;\n  const double average_decision_rate = *avg_ptr;\n\n  // Thresholds\n  double glue_factor = mode ? 1.30 : 1.15;\n  double rate_factor = mode ? 0.70 : 0.85;\n\n  // Check both conditions\n  bool glue_triggered = (fast_glue > glue_factor * slow_glue);\n  bool rate_triggered = (decision_rate < rate_factor * average_decision_rate);\n\n  // Print debug info (optional)\n  kissat_extremely_verbose(solver,\n    \"restarting: fast_glue=%.2f slow_glue=%.2f decision_rate=%.5f avg_decision_rate=%.5f \"\n    \"glue_factor=%.2f rate_factor=%.2f glue_triggered=%d rate_triggered=%d\",\n    fast_glue, slow_glue, decision_rate, average_decision_rate,\n    glue_factor, rate_factor, glue_triggered, rate_triggered);\n\n  // Both glue and decision rate conditions\n  if (glue_triggered && rate_triggered)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 491, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1279}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c3bf0819081b4510fe73b064b", "custom_id": "req-0004", "response": {"status_code": 200, "request_id": "09f6e392e4b9ddd6089f81333be8321d", "body": {"id": "resp_05a4b2dc221b7919006921ec55090081968de9b187abad646b", "object": "response", "created_at": 1763830869, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_05a4b2dc221b7919006921ec554b908196984c25cff0a9d759", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n\n  if (!GET_OPTION(restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get EWMA values for glue and decision rate\n  const double fast_glue = AVERAGE(fast_glue);\n  const double slow_glue = AVERAGE(slow_glue);\n  const double decision_rate = AVERAGE(decision_rate);\n\n  // Use a static variable for average_decision_rate EWMA\n  static double average_decision_rate = 0.0;\n  if (average_decision_rate == 0.0)\n    average_decision_rate = decision_rate;\n  else\n    average_decision_rate = 0.98 * average_decision_rate + 0.02 * decision_rate;\n\n  // Set thresholds depending on stable mode\n  double glue_threshold = 1.15, decision_threshold = 0.85;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    decision_threshold = 0.70;\n  }\n\n  // Hybrid glue/decision restart criteria\n  bool glue_condition = (fast_glue > glue_threshold * slow_glue);\n  bool decision_condition = (decision_rate < decision_threshold * average_decision_rate);\n\n  kissat_extremely_verbose(\n    solver,\n    \"adaptive hybrid restart: fast_glue %.2f > %.2f * slow_glue %.2f = %d, \"\n    \"decision_rate %.2f < %.2f * avg_decision_rate %.2f = %d\",\n    fast_glue, glue_threshold, slow_glue, glue_condition,\n    decision_rate, decision_threshold, average_decision_rate, decision_condition);\n\n  return (glue_condition && decision_condition);\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 398, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1186}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c3f6081908c31d9d6661a74e9", "custom_id": "req-0005", "response": {"status_code": 200, "request_id": "a56e444292d821557bcf892726f0bc44", "body": {"id": "resp_031864a411abca41006921ec5849bc81908cabe0866173e600", "object": "response", "created_at": 1763830872, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_031864a411abca41006921ec588bf48190b4e471ee14509d9f", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard cap: trigger restart if conflict limit reached\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Gather averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Maintain solver->average_decision_rate as EWMA of decision_rate\n  // Initialize if first time\n  if (solver->average_decision_rate == 0.0)\n    solver->average_decision_rate = decision_rate;\n  else\n    solver->average_decision_rate = 0.98 * solver->average_decision_rate + 0.02 * decision_rate;\n\n  // Select threshold based on stable mode\n  double glue_threshold, decision_threshold;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    decision_threshold = 0.70;\n  } else {\n    glue_threshold = 1.15;\n    decision_threshold = 0.85;\n  }\n\n  bool glue_cond = (fast_glue > glue_threshold * slow_glue);\n  bool decision_cond = (decision_rate < decision_threshold * solver->average_decision_rate);\n\n  kissat_extremely_verbose (\n    solver,\n    \"restart hybrid: fast_glue=%g, slow_glue=%g, glue_thr=%g, glue_cond=%d, \"\n    \"decision_rate=%g, avg_decision_rate=%g, dec_thr=%g, decision_cond=%d\",\n    fast_glue, slow_glue, glue_threshold, glue_cond,\n    decision_rate, solver->average_decision_rate, decision_threshold, decision_cond);\n\n  if (glue_cond && decision_cond)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 424, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1212}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c3de48190bfdcd933535a5170", "custom_id": "req-0006", "response": {"status_code": 200, "request_id": "ee111903ea9e1207429d8202d07955de", "body": {"id": "resp_0915a932615df4dd006921ec183f6c8190ac9446cc5a945ece", "object": "response", "created_at": 1763830808, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0915a932615df4dd006921ec187f2081909e7778659511d2b4", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver)\n{\n  assert (solver->unassigned);\n\n  if (!GET_OPTION (restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get EWMA values for glue and decision rate\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Store and update average_decision_rate as a field in averages[...].restart_avg_decision_rate\n  average *a = &solver->averages[solver->stable];\n  if (!a->restart_avg_decision_rate_initialized) {\n    a->restart_avg_decision_rate = decision_rate;\n    a->restart_avg_decision_rate_initialized = true;\n  } else {\n    a->restart_avg_decision_rate = 0.98 * a->restart_avg_decision_rate + 0.02 * decision_rate;\n  }\n\n  double glue_threshold, decision_threshold;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    decision_threshold = 0.70;\n  } else {\n    glue_threshold = 1.15;\n    decision_threshold = 0.85;\n  }\n\n  const double glue_limit = glue_threshold * slow_glue;\n  const double decision_limit = decision_threshold * a->restart_avg_decision_rate;\n\n  kissat_extremely_verbose (solver,\n    \"restart thresholds: glue_limit = %g (fast_glue = %g, slow_glue = %g, threshold = %.2f), \"\n    \"decision_limit = %g (decision_rate = %g, avg = %g, threshold = %.2f)\",\n    glue_limit, fast_glue, slow_glue, glue_threshold,\n    decision_limit, decision_rate, a->restart_avg_decision_rate, decision_threshold);\n\n  if (fast_glue > glue_limit && decision_rate < decision_limit)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 446, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1234}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c351c8190ba7924bda7b3eb9d", "custom_id": "req-0007", "response": {"status_code": 200, "request_id": "85edd0ba36ab8487e5ad4445138891e3", "body": {"id": "resp_0e968b8c8bcd7e07006921ec183de8819092d4ee9739ec30f1", "object": "response", "created_at": 1763830808, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_0e968b8c8bcd7e07006921ec18799c8190a61abd3b06ae1f48", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver)\n{\n  assert(solver->unassigned);\n\n  if (!GET_OPTION(restart))\n    return false;\n\n  if (!solver->level)\n    return false;\n\n  // Hard cap: if number of conflicts >= restart limit, trigger restart\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // EWMA averages from the current stable/unstable mode\n  const int mode = solver->stable;\n\n  const double fast_glue = solver->averages[mode].fast_glue.value;\n  const double slow_glue = solver->averages[mode].slow_glue.value;\n  const double decision_rate = solver->averages[mode].decision_rate.value;\n\n  // Maintain an EWMA of decision_rate as \"average_decision_rate\"\n  // We store it in solver->averages[mode].average_decision_rate.value\n  // If not initialized, set to current decision rate\n  double *average_decision_rate_ptr = &solver->averages[mode].average_decision_rate.value;\n  if (*average_decision_rate_ptr == 0)\n    *average_decision_rate_ptr = decision_rate;\n  else\n    *average_decision_rate_ptr = 0.98 * (*average_decision_rate_ptr) + 0.02 * decision_rate;\n\n  const double average_decision_rate = *average_decision_rate_ptr;\n\n  // Choose thresholds based on stable/unstable\n  double glue_threshold, decision_rate_threshold;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    decision_rate_threshold = 0.70;\n  } else {\n    glue_threshold = 1.15;\n    decision_rate_threshold = 0.85;\n  }\n\n  const bool glue_criterion = (fast_glue > glue_threshold * slow_glue);\n  const bool decision_criterion = (decision_rate < decision_rate_threshold * average_decision_rate);\n\n  kissat_extremely_verbose(\n    solver,\n    \"restarting thresholds: glue %.2f*%.2f=%.2f, decision %.2f*%.2f=%.2f\",\n    glue_threshold, slow_glue, glue_threshold*slow_glue,\n    decision_rate_threshold, average_decision_rate, decision_rate_threshold*average_decision_rate\n  );\n  kissat_extremely_verbose(\n    solver,\n    \"restart glue %g (fast) vs %g (thresh), decision rate %g vs %g (thresh)\",\n    fast_glue, glue_threshold*slow_glue, decision_rate, decision_rate_threshold*average_decision_rate\n  );\n\n  if (glue_criterion && decision_criterion)\n    return true;\n\n  // If stable, fallback to reluctant restart trigger\n  if (solver->stable)\n    return kissat_reluctant_triggered(&solver->reluctant);\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 608, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1396}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c3f288190bd9dd54a5dbca44b", "custom_id": "req-0008", "response": {"status_code": 200, "request_id": "643978df8ba0f6b61c5076da388f664c", "body": {"id": "resp_034f4c4991c06576006921ec183ec08197b3350261334eee8e", "object": "response", "created_at": 1763830808, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_034f4c4991c06576006921ec1874d48197b6d329df7fd9a006", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard cap on conflicts\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Gather averages\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Average decision rate EWMA update\n  double *avg_decision_rate = &solver->average_decision_rate;\n  if (!solver->statistics.conflicts) {\n    // initialize only on first call\n    *avg_decision_rate = decision_rate;\n  } else {\n    *avg_decision_rate = 0.98 * (*avg_decision_rate) + 0.02 * decision_rate;\n  }\n\n  // Thresholds\n  double glue_factor = 1.15, decision_factor = 0.85;\n  if (solver->stable) {\n    glue_factor = 1.30;\n    decision_factor = 0.70;\n  }\n\n  bool glue_cond = (fast_glue > glue_factor * slow_glue);\n  bool decision_cond = (decision_rate < decision_factor * (*avg_decision_rate));\n\n  kissat_extremely_verbose (solver,\n    \"restart glue/decision: fast_glue %.2f slow_glue %.2f avg_dec_rate %.6f dec_rate %.6f \"\n    \"thresholds glue %.2f dec %.2f\",\n    fast_glue, slow_glue, *avg_decision_rate, decision_rate, glue_factor, decision_factor);\n\n  if (glue_cond && decision_cond)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 391, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1179}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c38d08190896d2d4bf3ce9e7b", "custom_id": "req-0009", "response": {"status_code": 200, "request_id": "68f5f925590cc55af259b4725e9b706a", "body": {"id": "resp_00030393c5f33f11006921ec18442c8190a43bb1284b21d3dc", "object": "response", "created_at": 1763830808, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_00030393c5f33f11006921ec1896a4819089d5f027a12ee3fb", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting(kissat *solver) {\n  assert(solver->unassigned);\n  if (!GET_OPTION(restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard conflict cap\n  if (solver->statistics.conflicts >= solver->limits.restart.conflicts)\n    return true;\n\n  // Retrieve moving averages\n  const double fast_glue = solver->averages[solver->stable].fast_glue.value;\n  const double slow_glue = solver->averages[solver->stable].slow_glue.value;\n  const double decision_rate = solver->averages[solver->stable].decision_rate.value;\n\n  // This field stores the EWMA of decision_rate for the hybrid heuristic.\n  double *avg_decision_rate_ptr = &solver->adaptive_avg_decision_rate;\n  if (*avg_decision_rate_ptr == 0.0)\n    *avg_decision_rate_ptr = decision_rate;\n  else\n    *avg_decision_rate_ptr = 0.98 * (*avg_decision_rate_ptr) + 0.02 * decision_rate;\n\n  double glue_factor, rate_factor;\n  if (solver->stable) {\n    glue_factor = 1.30;\n    rate_factor = 0.70;\n  } else {\n    glue_factor = 1.15;\n    rate_factor = 0.85;\n  }\n\n  bool glue_condition = (fast_glue > glue_factor * slow_glue);\n  bool rate_condition = (decision_rate < rate_factor * (*avg_decision_rate_ptr));\n\n  // Verbose logging (as in original)\n  kissat_extremely_verbose(\n    solver,\n    \"adaptive hybrid: fast_glue %.2f, slow_glue %.2f, avg_decision_rate %.2f, cur_decision_rate %.2f, thresholds: glue x%.2f, rate x%.2f\",\n    fast_glue, slow_glue, *avg_decision_rate_ptr, decision_rate, glue_factor, rate_factor);\n\n  if (glue_condition && rate_condition)\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 440, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1228}, "user": null, "metadata": {}}}, "error": null}
{"id": "batch_req_6921ec5c3e408190b5711347d014eb42", "custom_id": "req-0010", "response": {"status_code": 200, "request_id": "8360744c0427b8e5d0974bb9baf82a85", "body": {"id": "resp_02fec72ae4bd0b05006921ec1b8c74819082b0be0130ce53c9", "object": "response", "created_at": 1763830811, "status": "completed", "background": false, "billing": {"payer": "developer"}, "error": null, "incomplete_details": null, "instructions": null, "max_output_tokens": null, "max_tool_calls": null, "model": "gpt-4.1-2025-04-14", "output": [{"id": "msg_02fec72ae4bd0b05006921ec1bbf2081909582784517f04f61", "type": "message", "status": "completed", "content": [{"type": "output_text", "annotations": [], "logprobs": [], "text": "<code>\nbool kissat_restarting (kissat *solver) {\n  assert (solver->unassigned);\n  if (!GET_OPTION (restart))\n    return false;\n  if (!solver->level)\n    return false;\n\n  // Hard conflict limit trigger\n  if (CONFLICTS >= solver->limits.restart.conflicts)\n    return true;\n\n  // Get EWMA values\n  const double fast_glue = AVERAGE (fast_glue);\n  const double slow_glue = AVERAGE (slow_glue);\n  const double decision_rate = AVERAGE (decision_rate);\n\n  // Maintain and update average_decision_rate (EWMA)\n  // Use solver->restart_average_decision_rate as persistent storage.\n  double *average_decision_rate_ptr = &solver->restart_average_decision_rate;\n  // If first time, initialize to current EWMA\n  if (*average_decision_rate_ptr == 0.0)\n    *average_decision_rate_ptr = decision_rate;\n  else\n    *average_decision_rate_ptr = 0.98 * (*average_decision_rate_ptr) + 0.02 * decision_rate;\n\n  double glue_threshold, rate_threshold;\n  if (solver->stable) {\n    glue_threshold = 1.30;\n    rate_threshold = 0.70;\n  } else {\n    glue_threshold = 1.15;\n    rate_threshold = 0.85;\n  }\n\n  // Adaptive hybrid trigger\n  if (fast_glue > glue_threshold * slow_glue &&\n      decision_rate < rate_threshold * (*average_decision_rate_ptr))\n    return true;\n\n  return false;\n}\n</code>"}], "role": "assistant"}], "parallel_tool_calls": true, "previous_response_id": null, "prompt_cache_key": null, "prompt_cache_retention": null, "reasoning": {"effort": null, "summary": null}, "safety_identifier": null, "service_tier": "default", "store": true, "temperature": 0.7, "text": {"format": {"type": "text"}, "verbosity": "medium"}, "tool_choice": "auto", "tools": [], "top_logprobs": 0, "top_p": 1.0, "truncation": "disabled", "usage": {"input_tokens": 788, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 340, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1128}, "user": null, "metadata": {}}}, "error": null}
